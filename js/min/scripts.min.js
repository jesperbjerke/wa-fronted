window.wp=window.wp||{},tinymce.PluginManager.add("fronted_shortcode",function(e){var t=(window.tinymce,e);e.shortcode_edit={bind_shortcode_edit:function(e){var t=this;e=jQuery(e),e.find(".wa-shortcode-wrap").off("hover").hover(function(){t.show_shortcode_button(jQuery(this),e)},function(){t.hide_shortcode_button()})},show_shortcode_button:function(e,n){var a=this,r=e.children(),i=0!==r.length?jQuery(r[0]):e,o=i.offset(),s=jQuery(window).scrollTop(),c=o.top-s,l=o.top,u=jQuery("#wa-fronted-edit-shortcode");u.removeClass("arrow-over arrow-under"),42>=c?(l=o.top+i.height()+42,u.addClass("arrow-over")):u.addClass("arrow-under"),u.css({left:o.left+(i.width()/2-u.width()/2),top:l}).addClass("show").hover(function(){jQuery(this).addClass("show")},function(){a.hide_shortcode_button()});var m=u.find("#wa-fronted-edit-shortcode-button"),d=u.find("#wa-fronted-remove-shortcode-button");m.addClass("show"),m.off(),m.on("click",function(t){t.preventDefault(),a.show_shortcode_edit(e,n)}),d.addClass("show"),d.off(),d.one("click",function(n){n.preventDefault(),e.remove(),a.hide_shortcode_button(),t.fire("change")})},hide_shortcode_button:function(){jQuery("#wa-fronted-edit-shortcode").removeClass("show"),jQuery("#wa-fronted-edit-shortcode-button").addClass("show"),jQuery("#wa-fronted-remove-shortcode-button").addClass("show"),jQuery("#wa-fronted-edit-shortcode .shortcode-input-wrapper").removeClass("show")},show_shortcode_edit:function(e,t){var n=this,a=wa_fronted.shortcode_from_attr(e),r=e.attr("data-shortcode-base"),i=wa_fronted.apply_filters("shortcode_actions",["gallery"]);if(-1!==i.indexOf(r))wa_fronted.is_editing_shortcode=e,wa_fronted.do_action("shortcode_action_"+r,a,e);else{var o=e.children(),s=0!==o.length?jQuery(o[0]):e,c=s.offset(),l=jQuery("#wa-fronted-edit-shortcode");jQuery("#wa-fronted-edit-shortcode-button").removeClass("show"),jQuery("#wa-fronted-remove-shortcode-button").removeClass("show"),l.find(".shortcode-input-wrapper").addClass("show"),l.find("#submit-shortcode").off().one("click",function(a){a.preventDefault(),wa_fronted.show_loading_spinner();var r=l.find("#wa_fronted_shortcode_input").val();wa_fronted.shortcode_to_html(r,!1,function(a){""!==a?(wa_fronted.replace_html(e,a),n.bind_shortcode_edit(t)):toastr.error(wa_fronted.i18n("Render unsuccessful"),wa_fronted.i18n("Sent code is not a valid shortcode")),wa_fronted.hide_loading_spinner()})}),l.css({left:c.left+(s.width()/2-l.width()/2)}).find("input").val(a).focus()}}},e.addButton("render_shortcode",{tooltip:wa_fronted.i18n("Render as shortcode"),text:"[ ]",context:"insert",onclick:function(){wa_fronted.show_loading_spinner();var t=e.selection.getContent({format:"text"});wa_fronted.shortcode_to_html(t,!0,function(t){""!==t?e.selection.setContent(t):toastr.error(wa_fronted.i18n("Render unsuccessful"),wa_fronted.i18n("Selected text is not a valid shortcode")),e.shortcode_edit.bind_shortcode_edit(e.targetElm),wa_fronted.hide_loading_spinner()})}}),e.settings.toolbar.push("render_shortcode"),jQuery(window).load(function(){e.shortcode_edit.bind_shortcode_edit(e.targetElm)})});
window.wp=window.wp||{},tinymce.PluginManager.add("fronted_image",function(e){function t(e){return e=e.replace(/(?:<p>)?\[(?:wp_)?caption([^\]]+)\]([\s\S]+?)\[\/(?:wp_)?caption\](?:<\/p>)?/g,function(e,t,n){var a,r,i,o,s,c,l=u.trim;return a=t.match(/id=['"]([^'"]*)['"] ?/),a&&(t=t.replace(a[0],"")),r=t.match(/align=['"]([^'"]*)['"] ?/),r&&(t=t.replace(r[0],"")),i=t.match(/class=['"]([^'"]*)['"] ?/),i&&(t=t.replace(i[0],"")),c=t.match(/width=['"]([0-9]*)['"] ?/),c&&(t=t.replace(c[0],"")),n=l(n),s=n.match(/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i),s&&s[2]?(o=l(s[2]),s=l(s[1])):(o=l(t).replace(/caption=['"]/,"").replace(/['"]$/,""),s=n),a=a&&a[1]?a[1].replace(/[<>&]+/g,""):"",r=r&&r[1]?r[1]:"alignnone",i=i&&i[1]?" "+i[1].replace(/[<>&]+/g,""):"",!c&&s&&(c=s.match(/width=['"]([0-9]*)['"]/)),c&&c[1]&&(c=c[1]),c&&o?(c=parseInt(c,10),m||(c+=10),'<div class="mceTemp"><'+d+' id="'+a+'" class="wp-caption '+r+i+'" style="width: '+c+'px"><'+f+' class="wp-caption-dt">'+s+"</"+f+"><"+p+' class="wp-caption-dd wp-caption-text">'+o+"</"+p+"></"+d+"></div>"):n})}function n(e){return e.replace(/<div (?:id="attachment_|class="mceTemp)[^>]*>([\s\S]+?)<\/div>/g,function(e,t){var n="";return-1===t.indexOf("<img ")?(n=t.match(new RegExp("<"+p+" [^>]+>([\\s\\S]+?)<\\/"+p+">","i")),n&&n[1]?"<p>"+n[1]+"</p>":""):(n=t.replace(new RegExp("<"+d+" ([^>]+)>\\s*<"+f+" [^>]+>([\\s\\S]+?)<\\/"+f+">\\s*<"+p+" [^>]+>([\\s\\S]*?)<\\/"+p+">\\s*<\\/"+d+">","gi"),function(e,t,n,a){var r,i,o,s;return s=n.match(/width="([0-9]*)"/),s=s&&s[1]?s[1]:"",s&&a?(r=t.match(/id="([^"]*)"/),r=r&&r[1]?r[1]:"",i=t.match(/class="([^"]*)"/),i=i&&i[1]?i[1]:"",o=i.match(/align[a-z]+/i)||"alignnone",i=i.replace(/wp-caption ?|align[a-z]+ ?/gi,""),i&&(i=' class="'+i+'"'),a=a.replace(/\r\n|\r/g,"\n").replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")}),a=a.replace(/\s*\n\s*/g,"<br />"),'[caption id="'+r+'" align="'+o+'" width="'+s+'"'+i+"]"+n+" "+a+"[/caption]"):n}),n=u.trim(n),0!==n.indexOf("[caption")&&(n=t.replace(/[\s\S]*?((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)(<p>[\s\S]*<\/p>)?[\s\S]*/gi,"<p>$1</p>$2")),n)})}function a(t){var n,a,r,i,o,s,c,l,m=[],d=e.dom,_=/^\d+$/;return r={attachment_id:!1,size:"custom",caption:"",align:"none",extraClasses:"",link:!1,linkUrl:"",linkClassName:"",linkTargetBlank:!1,linkRel:"",title:""},r.url=d.getAttrib(t,"src"),r.alt=d.getAttrib(t,"alt"),r.title=d.getAttrib(t,"title"),c=d.getAttrib(t,"width"),l=d.getAttrib(t,"height"),(!_.test(c)||parseInt(c,10)<1)&&(c=t.naturalWidth||t.width),(!_.test(l)||parseInt(l,10)<1)&&(l=t.naturalHeight||t.height),r.customWidth=r.width=c,r.customHeight=r.height=l,n=u.explode(t.className," "),a=[],u.each(n,function(e){/^wp-image/.test(e)?r.attachment_id=parseInt(e.replace("wp-image-",""),10):/^align/.test(e)?r.align=e.replace("align",""):/^size/.test(e)?r.size=e.replace("size-",""):a.push(e)}),r.extraClasses=a.join(" "),i=d.getParents(t,".wp-caption"),i.length&&(i=i[0],n=i.className.split(" "),u.each(n,function(e){/^align/.test(e)?r.align=e.replace("align",""):e&&"wp-caption"!==e&&m.push(e)}),r.captionClassName=m.join(" "),o=d.select(".wp-caption-dd",i),o.length&&(o=o[0],r.caption=e.serializer.serialize(o).replace(/<br[^>]*>/g,"$&\n").replace(/^<p>/,"").replace(/<\/p>$/,""))),t.parentNode&&"A"===t.parentNode.nodeName&&(s=t.parentNode,r.linkUrl=d.getAttrib(s,"href"),r.linkTargetBlank="_blank"===d.getAttrib(s,"target")?!0:!1,r.linkRel=d.getAttrib(s,"rel"),r.linkClassName=s.className),r}function r(e){return e&&!(!e.textContent&&!e.innerText)}function i(t,n){var a,i,o,s,c,l,_,g,v,h,b,w,y,k,x,D,F=e.dom;a=u.explode(n.extraClasses," "),a||(a=[]),n.caption||a.push("align"+n.align),n.attachment_id&&(a.push("wp-image-"+n.attachment_id),n.size&&"custom"!==n.size&&a.push("size-"+n.size)),k=n.width,x=n.height,"custom"===n.size&&(k=n.customWidth,x=n.customHeight),w={src:n.url,width:k||null,height:x||null,alt:n.alt,title:n.title||null,"class":a.join(" ")||null},F.setAttribs(t,w),y={href:n.linkUrl,rel:n.linkRel||null,target:n.linkTargetBlank?"_blank":null,"class":n.linkClassName||null},t.parentNode&&"A"===t.parentNode.nodeName&&!r(t.parentNode)?n.linkUrl?F.setAttribs(t.parentNode,y):F.remove(t.parentNode,!0):n.linkUrl&&((_=F.getParent(t,"a"))&&F.insertAfter(t,_),_=F.create("a",y),t.parentNode.insertBefore(_,t),_.appendChild(t)),g=e.dom.getParent(t,".mceTemp"),o=t.parentNode&&"A"===t.parentNode.nodeName&&!r(t.parentNode)?t.parentNode:t,n.caption?(b=n.attachment_id?"attachment_"+n.attachment_id:null,D="align"+(n.align||"none"),i="wp-caption "+D,n.captionClassName&&(i+=" "+n.captionClassName.replace(/[<>&]+/g,"")),m||(k=parseInt(k,10),k+=10),g?(h=F.select(".wp-caption",g),h.length&&F.setAttribs(h,{id:b,"class":i,style:"width: "+k+"px"}),v=F.select(".wp-caption-dd",g),v.length&&F.setHTML(v[0],n.caption)):(b=b?'id="'+b+'" ':"",s="<"+d+" "+b+'class="'+i+'" style="width: '+k+'px"><'+f+' class="wp-caption-dt">'+F.getOuterHTML(o)+"</"+f+"><"+p+' class="wp-caption-dd wp-caption-text">'+n.caption+"</"+p+"></"+d+">",(c=F.getParent(o,"p"))?(l=F.create("div",{"class":"mceTemp"},s),c.parentNode.insertBefore(l,c),F.remove(o),F.isEmpty(c)&&F.remove(c)):F.setOuterHTML(o,'<div class="mceTemp">'+s+"</div>"))):g&&(c=F.create("p"),g.parentNode.insertBefore(c,g),c.appendChild(o),F.remove(g)),wp.media.events&&wp.media.events.trigger("editor:image-update",{editor:e,metadata:n,image:t}),e.nodeChanged()}function o(t){var n,r,o;return"undefined"!=typeof wp&&wp.media?(o=a(t),wp.media.events.trigger("editor:image-edit",{editor:e,metadata:o,image:t}),n=wp.media({frame:"image",state:"image-details",metadata:o}),wp.media.events.trigger("editor:frame-create",{frame:n}),r=function(a){e.focus(),e.undoManager.transact(function(){i(t,a)}),n.detach()},n.state("image-details").on("update",r),n.state("replace-image").on("replace",r),n.on("close",function(){e.focus(),n.detach()}),void n.open()):void e.execCommand("mceImage")}function s(t){var n;"DIV"===t.nodeName&&e.dom.hasClass(t,"mceTemp")?n=t:("IMG"===t.nodeName||"DT"===t.nodeName||"A"===t.nodeName)&&(n=e.dom.getParent(t,"div.mceTemp")),null===n&&null!==e.dom.getParent(t,"a")&&(n=e.dom.getParent(t,"a")),n?(e.selection.select(n.nextSibling?n.nextSibling:n.previousSibling?n.previousSibling:n.parentNode),e.selection.collapse(!0),e.nodeChanged(),e.dom.remove(n)):e.dom.remove(t),jQuery(e.targetElm).find("p:empty").remove(),e.theme.panel.hide(),e.focus()}function c(t,n){n=n||!1;var a=t.states.get("gallery-edit");if(library=a.get("library"),0!==library.length){var r=wp.media.gallery.shortcode(library).string();wa_fronted.shortcode_to_html(r,n===!1?!0:!1,function(t){n!==!1?wa_fronted.replace_html(n,t):e.selection.setContent(t),e.hasOwnProperty("shortcode_edit")&&e.shortcode_edit.bind_shortcode_edit(e.targetElm)})}}function l(e){var t,n,a=wp.shortcode.next("gallery",e),r=wp.media.gallery.defaults.id;return a?(a=a.shortcode,_.isUndefined(a.get("id"))&&!_.isUndefined(r)&&a.set("id",r),t=wp.media.gallery.attachments(a),n=new wp.media.model.Selection(t.models,{props:t.props.toJSON(),multiple:!0}),n.gallery=t.gallery,n.more().done(function(){n.props.set({query:!1}),n.unmirror(),n.props.unset("orderby")}),n):!1}var u=window.tinymce,m=e.getParam("wpeditimage_html5_captions"),d=m?"figure":"dl",f=m?"section":"dt",p=m?"figcaption":"dd",g=!1,v={aspect_ratio:function(e,t){return e/t},round:function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)},get_closest_image_size:function(e,t,n,a){var r=this,t=Math.round(t),n=Math.round(n),i={diff:null,size_name:null,height:null,width:null,crop:null},o=r.round(r.aspect_ratio(n,t),2);for(size in global_vars.image_sizes){var s=global_vars.image_sizes[size],c=parseInt(s.height),l=parseInt(s.width),u=r.round(r.aspect_ratio(l,c),2);if(o===u||s.crop!==!0&&1!==s.crop){var m=Math.abs(t-c);(m<i.diff||null===i.diff)&&(i.diff=m,i.size_name=size,i.height=c,i.width=l,i.crop=s.crop)}}null!==i.size_name&&jQuery.post(global_vars.ajax_url,{action:"wa_get_image_src",attachment_id:e,size:i.size_name},function(e){a(e)})}};return e.on("init",function(){var t=e.dom;e.on("wpLoadImageForm",function(t){if(!e.getParam("wpeditimage_disable_captions")){var n={type:"textbox",flex:1,name:"caption",minHeight:60,multiline:!0,scroll:!0,label:"Image caption"};t.data.splice(t.data.length-1,0,n)}}),e.on("wpNewImageRefresh",function(e){var n,a;(n=t.getParent(e.node,".wp-caption"))&&(n.style.width||(a=parseInt(e.node.clientWidth,10)+10,a=a?a+"px":"50%",t.setStyle(n,"width",a)))}),e.on("wpImageFormSubmit",function(n){var a,r,i,o,s,c=n.imgData.data,l=n.imgData.node,u=n.imgData.caption,_="",g="",v="";return c.id="__wp-temp-img-id",n.imgData.cancel=!0,c.style||(c.style=null),c.src?(u&&(u=u.replace(/\r\n|\r/g,"\n").replace(/<\/?[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")}),u=u.replace(/(<br[^>]*>)\s*\n\s*/g,"$1").replace(/\s*\n\s*/g,"<br />")),l?(s=l.id||null,t.setAttribs(l,c),a=t.getParent(l,".wp-caption"),u?a?(r=t.select(".wp-caption-dd",a)[0])&&(r.innerHTML=u):(l.className&&(_=l.className.match(/wp-image-([0-9]+)/),g=l.className.match(/align(left|right|center|none)/)),g?(g=g[0],l.className=l.className.replace(/align(left|right|center|none)/g,"")):g="alignnone",g=' class="wp-caption '+g+'"',_&&(_=' id="attachment_'+_[1]+'"'),v=c.width||l.clientWidth,v&&(v=parseInt(v,10),m||(v+=10),v=' style="width: '+v+'px"'),l.parentNode&&"A"===l.parentNode.nodeName?(o=t.getOuterHTML(l.parentNode),i=l.parentNode):(o=t.getOuterHTML(l),i=l),o="<"+d+" "+_+g+v+"><"+f+' class="wp-caption-dt">'+o+"</"+f+"><"+p+' class="wp-caption-dd wp-caption-text">'+u+"</"+p+"></"+d+">",(r=t.getParent(l,"p"))?(a=t.create("div",{"class":"mceTemp"},o),t.insertAfter(a,r),e.selection.select(a),e.nodeChanged(),t.remove(i),t.isEmpty(r)&&t.remove(r)):e.selection.setContent('<div class="mceTemp">'+o+"</div>")):a&&(o=t.getOuterHTML("A"===l.parentNode.nodeName?l.parentNode:l),r=t.create("p",{},o),t.insertAfter(r,a.parentNode),e.selection.select(r),e.nodeChanged(),t.remove(a.parentNode))):(o=t.createHTML("img",c),u?(i=e.selection.getNode(),c.width&&(v=parseInt(c.width,10),m||(v+=10),v=' style="width: '+v+'px"'),o="<"+d+' class="wp-caption alignnone"'+v+"><"+f+' class="wp-caption-dt">'+o+"</"+f+"><"+p+' class="wp-caption-dd wp-caption-text">'+u+"</"+p+"></"+d+">",r="P"===i.nodeName?i:t.getParent(i,"p"),r&&"P"===r.nodeName?(a=t.create("div",{"class":"mceTemp"},o),r.parentNode.insertBefore(a,r),e.selection.select(a),e.nodeChanged(),t.isEmpty(r)&&t.remove(r)):e.selection.setContent('<div class="mceTemp">'+o+"</div>")):e.selection.setContent(o)),l=t.get("__wp-temp-img-id"),t.setAttrib(l,"id",s),void(n.imgData.node=l)):void(l&&(t.remove((a=t.getParent(l,"div.mceTemp"))?a:"A"===l.parentNode.nodeName?l.parentNode:l),e.nodeChanged()))}),e.on("wpLoadImageData",function(n){var a,r=n.imgData.data,i=n.imgData.node;(a=t.getParent(i,".wp-caption"))&&(a=t.select(".wp-caption-dd",a)[0],a&&(r.caption=e.serializer.serialize(a).replace(/<br[^>]*>/g,"$&\n").replace(/^<p>/,"").replace(/<\/p>$/,"")))});var n=["image/jpeg","image/png","image/gif"];e.on("drop",function(t){if(!g&&Modernizr.filereader&&e.settings.fronted_options.media_upload===!0&&(t.preventDefault(),t.stopPropagation(),0!==t.dataTransfer.files.length)){wa_fronted.show_loading_spinner();var a=t.dataTransfer.files[0];if(-1!==jQuery.inArray(a.type,n)){var r=new FileReader;r.onload=function(t){jQuery.post(global_vars.ajax_url,{action:"wa_create_image",post_id:e.settings.fronted_options.post_id,file_data:encodeURIComponent(t.target.result),file_name:a.name,file_type:a.type,wa_fronted_save_nonce:global_vars.nonce},function(t){var n=t.attachment_obj,a=n.sizes.medium,r='<img src="'+a.url+'" width="'+a.width+'" height="'+a.height+'" alt="'+n.title+'" class="wp-image-'+n.id+' alignleft size-medium" style="height:'+a.height+"; width:"+a.width+';">';e.insertContent(r),wa_fronted.hide_loading_spinner()})},r.readAsDataURL(a)}else wa_fronted.show_loading_spinner()}}),t.bind(e.getDoc(),"dragend",function(e){g=!1}),t.bind(e.getDoc(),"dragstart",function(n){var a=e.selection.getNode();g=!0,"IMG"===a.nodeName&&(t.getParent(a,".wp-caption")||t.getParent(a,".gallery-icon"))&&n.preventDefault()}),u.Env.ie&&u.Env.ie>10&&(t.bind(e.getBody(),"mscontrolselect",function(n){"IMG"===n.target.nodeName&&t.getParent(n.target,".wp-caption")?e.getBody().focus():"DL"===n.target.nodeName&&t.hasClass(n.target,"wp-caption")&&n.target.focus()}),e.on("click",function(n){"IMG"===n.target.nodeName&&t.getAttrib(n.target,"data-wp-imgselect")&&t.getParent(n.target,".wp-caption")&&e.getBody().focus()}))}),e.on("ObjectResized",function(t){var n=t.target;if("IMG"===n.nodeName){var a=n.className.match(/wp-image-\d+/);if(null!==a){var r=a[0].match(/\d+/)[0];v.get_closest_image_size(r,n.height,n.width,function(e){e[3]===!0&&(n.className=n.className.replace(/size-\S+/,"size-"+e[4]),n.src=e[0])})}e.undoManager.transact(function(){var a,r,i=e.dom;n.className=n.className.replace(/\bsize-[^ ]+/,""),(a=i.getParent(n,".wp-caption"))&&(r=t.width||i.getAttrib(n,"width"),r&&(r=parseInt(r,10),m||(r+=10),i.setStyle(a,"width",r+"px")))})}}),e.on("BeforeExecCommand",function(t){var n,a,r,i,o=t.command,s=e.dom;if("mceInsertContent"===o)(n=s.getParent(e.selection.getNode(),"div.mceTemp"))?(a=s.create("p"),s.insertAfter(a,n),e.selection.setCursorLocation(a,0),e.nodeChanged()):t.value.hasOwnProperty("content")||-1===t.value.indexOf("[gallery ")||(t.preventDefault(),wa_fronted.show_loading_spinner(),wa_fronted.shortcode_to_html(t.value,!0,function(t){e.insertContent(t),e.hasOwnProperty("shortcode_edit")&&e.shortcode_edit.bind_shortcode_edit(e.targetElm),wa_fronted.hide_loading_spinner()}));else if("JustifyLeft"===o||"JustifyRight"===o||"JustifyCenter"===o||"alignnone"===o){if(n=e.selection.getNode(),i="align"+o.slice(7).toLowerCase(),r=e.dom.getParent(n,".wp-caption"),"IMG"!==n.nodeName&&!r)return;n=r||n,"alignleft"!==i&&e.dom.removeClass(n,"alignleft"),"aligncenter"!==i&&e.dom.removeClass(n,"aligncenter"),"alignright"!==i&&e.dom.removeClass(n,"alignright"),"alignnone"!==i&&e.dom.toggleClass(n,i),e.nodeChanged(),t.preventDefault()}}),e.on("keydown",function(t){var n,a,r,i,o=e.selection,c=t.keyCode,l=e.dom;if(c===u.util.VK.ENTER)n=o.getNode(),a=l.getParent(n,"div.mceTemp"),a&&(l.events.cancel(t),u.each(l.select(".wp-caption-dt, .wp-caption-dd",a),function(e){l.isEmpty(e)&&l.remove(e)}),i=u.Env.ie&&u.Env.ie<11?"":'<br data-mce-bogus="1" />',r=l.create("p",null,i),"DD"===n.nodeName?l.insertAfter(r,a):a.parentNode.insertBefore(r,a),e.nodeChanged(),o.setCursorLocation(r,0));else if((c===u.util.VK.DELETE||c===u.util.VK.BACKSPACE)&&(n=o.getNode(),"DIV"===n.nodeName&&l.hasClass(n,"mceTemp")?a=n:("IMG"===n.nodeName||"DT"===n.nodeName||"A"===n.nodeName)&&(a=l.getParent(n,"div.mceTemp")),a))return l.events.cancel(t),s(n),!1}),e.wpSetImgCaption=function(e){return t(e)},e.wpGetImgCaption=function(e){return n(e)},e.on("BeforeSetContent",function(t){"raw"!==t.format&&(t.content=e.wpSetImgCaption(t.content))}),e.on("PostProcess",function(t){t.get&&(t.content=e.wpGetImgCaption(t.content),t.content=t.content.replace(/ data-wp-imgselect="1"/g,""))}),e.addButton("remove",{tooltip:"Remove",icon:"dashicons-no",onclick:function(){s(e.selection.getNode())}}),e.addButton("edit",{tooltip:"Edit",icon:"dashicons-edit",onclick:function(){o(e.selection.getNode())}}),u.each({alignleft:"Align Left",aligncenter:"Align Center",alignright:"Align Right",alignnone:"Don’t Align"},function(t,n){var a=n.slice(5);e.addButton("img"+n,{tooltip:t,icon:"dashicons-align-"+a,cmd:"alignnone"===n?n:"Justify"+a.slice(0,1).toUpperCase()+a.slice(1),onPostRender:function(){var t=this;e.on("NodeChange",function(a){var r=e.dom.getParent(a.element,".wp-caption")||a.element;t.active("alignnone"===n?!e.dom.hasClass(r,"alignleft")&&!e.dom.hasClass(r,"aligncenter")&&!e.dom.hasClass(r,"alignright"):e.dom.hasClass(r,n))})}})}),e.addButton("wp_media",{tooltip:"Media",icon:"dashicons-admin-media",onclick:function(){wp.media.editor.open(e.id)}}),wa_fronted.add_action("shortcode_action_gallery",function(t,n){if(0!==n.parents("#"+e.id).length){var a=wp.media({frame:"post",state:"gallery-edit",title:wp.media.view.l10n.editGalleryTitle,editing:!0,multiple:!0,selection:l(t)});a.state("gallery-edit").on("update",function(){c(a,n)}),a.on("close",function(){e.focus(),a.detach()}),a.open()}}),{_do_shcode:t,_get_shcode:n}});
window.wp=window.wp||{},window.send_to_editor=window.send_to_editor||function(e){if(-1!==e.indexOf("[")){wa_fronted.show_loading_spinner();var t="undefined"!=typeof wa_fronted.is_editing_shortcode&&wa_fronted.is_editing_shortcode!==!1;wa_fronted.shortcode_to_html(e,t!==!0,function(n){""!==n?t?wa_fronted.replace_html(wa_fronted.is_editing_shortcode,n):tinymce.activeEditor.selection.setContent(n):tinymce.activeEditor.selection.setContent(e),tinymce.activeEditor.hasOwnProperty("shortcode_edit")&&tinymce.activeEditor.shortcode_edit.bind_shortcode_edit(tinymce.activeEditor.targetElm),wa_fronted.is_editing_shortcode=!1,wa_fronted.hide_loading_spinner()})}else tinymce.activeEditor.selection.setContent(e)},tinymce.ThemeManager.add("fronted",function(e){function t(e,t){for(;e;){if(e.nodeName===t)return e;e=e.parentNode}return!1}function n(n,a){var r,i=[];if(n)return l(n,function(n){function o(){var t=e.selection;"bullist"===l&&t.selectorChanged("ul > li",function(e,t){for(var a,r=t.parents.length;r--&&(a=t.parents[r].nodeName,"OL"!==a&&"UL"!==a););n.active(e&&"UL"===a)}),"numlist"===l&&t.selectorChanged("ol > li",function(e,t){for(var a,r=t.parents.length;r--&&(a=t.parents[r].nodeName,"OL"!==a&&"UL"!==a););n.active(e&&"OL"===a)}),n.settings.stateSelector&&t.selectorChanged(n.settings.stateSelector,function(e){n.active(e)},!0),n.settings.disabledStateSelector&&t.selectorChanged(n.settings.disabledStateSelector,function(e){n.disabled(e)})}var l;"|"===n?r=null:c.has(n)?(n={type:n},s.toolbar_items_size&&(n.size=s.toolbar_items_size),i.push(n),r=null):((!r||a)&&(r={type:"buttongroup",items:[]},i.push(r)),e.buttons[n]&&(l=n,n=e.buttons[l],"function"==typeof n&&(n=n()),n.icon&&-1!==n.icon.indexOf("dashicons")&&(n.icon="dashicon "+n.icon),a&&(n.text=n.tooltip,n.tooltip=!1),n.type=n.type||"button",s.toolbar_items_size&&(n.size=s.toolbar_items_size),"link"===l?n.onPostRender=function(){var n=this;e.on("NodeChange",function(e){n.active(t(e.element,"A"))})}:"unlink"===l&&(n.onPostRender=function(){var t=this;e.on("NodeChange",function(n){var a="A"!==n.element.nodeName&&-1===e.selection.getContent().indexOf("<a");t.disabled(a),u.setAttrib(t.getEl(),"tabindex",a?"0":"-1")})},n.onclick=function(){-1===e.selection.getContent().indexOf("<a")&&e.selection.select(e.selection.getNode()),e.execCommand("unlink")}),n=c.create(n),r.items.push(n),e.initialized?o():e.on("init",o)))}),i}function a(e){return c.create({type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:[{type:"toolbar",layout:"flow",items:n(e)}]})}var r,i=window.tinymce,o=this,s=e.settings,c=i.ui.Factory,l=i.each,u=i.DOM,m=32;l({H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",H5:"Heading 5",H6:"Heading 6",Pre:"Preformatted"},function(t,n){var a=n.toLowerCase();e.addButton(a,{tooltip:t,text:n,onclick:function(){e.formatter.toggle(a)},onPostRender:function(){var t=this;e.on("nodeChange",function(n){l(n.parents,function(n){t.active(!!e.formatter.matchNode(n,a))})})}})}),e.toolbarItems=n,o.renderUI=function(){function t(){return""===e.getContent({format:"raw"}).replace(/(?:<p[^>]*>)?(?:<br[^>]*>)?(?:<\/p>)?/,"")}var n,i,d={},_=0;return s.content_editable=!0,e.on("activate focus",function(){r=!0,u.addClass(e.getBody(),"mce-edit-focus")}),e.on("deactivate blur hide",function(){r=!1,u.removeClass(e.getBody(),"mce-edit-focus")}),e.on("remove",function(){n&&n.remove(),n=null}),s.placeholder&&(e.on("blur LoadContent deactivate",function(){t()&&(e.setContent(s.placeholder),i=!0,u.addClass(e.getBody(),"mce-placeholder"))}),e.on("focus activate",function(){i&&e.setContent("")}),e.on("SetContent",function(t){i&&!t.load&&(i=!1,u.removeClass(e.getBody(),"mce-placeholder"))}),e.on("PostProcess",function(e){i&&e.content&&(e.content="")}),e.on("BeforeAddUndo",function(e){i&&e.preventDefault()})),s.toolbar&&s.toolbar.length&&!n?("relative"===u.getStyle(document.body,"position",!0)&&(_=parseInt(u.getStyle(document.body,"margin-top",!0),10)+parseInt(u.getStyle(document.documentElement,"padding-top",!0),10)+parseInt(u.getStyle(document.documentElement,"margin-top",!0),10)),d.normal=a(s.toolbar),d.img=a(wa_fronted.apply_filters("image_edit_toolbar",["imgalignleft","imgaligncenter","imgalignright","imgalignnone","edit","remove"],s.fronted_options)),d.view=a(["editview","removeview"]),d.media=a(wa_fronted.apply_filters("image_upload_toolbar",["wp_media"],s.fronted_options)),n=o.panel=c.create({type:"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"stack",autohide:!0,items:[d.normal,d.img,d.view,d.media]}),n.reposition=function(t,n){var a,r,i,o,s,c=this.getEl(),f=n||e.selection.getRng(),p=f.getBoundingClientRect(),g=(p.left+p.right)/2,v=window.innerWidth,h=parseInt(u.getStyle(c,"margin-bottom",!0),10)+_;if(f.collapsed||0===g){var b=wa_fronted.getCaretPositionPx();p={top:b.y,bottom:b.y+c.offsetHeight/2,left:b.x,right:b.x},g=b.x}return c.className=(" "+c.className+" ").replace(/\smce-arrow-\S+\s/g," ").slice(1,-1),t=t||"normal",d[t]._visible||(l(d,function(e){e.hide()}),d[t].show()),a=c.offsetWidth,r=a/2,p.top<c.offsetHeight+m?(s=" mce-arrow-up",i=p.bottom+h):(s=" mce-arrow-down",i=p.top-c.offsetHeight-h),o=g-r,a>=v?(s+=" mce-arrow-full",o=0):0>o&&p.left+a>v||o+a>v&&p.right-a<0?o=(v-a)/2:0>o?(s+=" mce-arrow-left",o=p.left):o+a>v&&(s+=" mce-arrow-right",o=p.right-a),c.className+=s,u.setStyles(c,{left:o,top:i+window.pageYOffset}),this},n.on("show",function(){var e=this;setTimeout(function(){e._visible&&u.addClass(e.getEl(),"mce-inline-toolbar-active")},100)}),n.on("hide",function(){u.removeClass(this.getEl(),"mce-inline-toolbar-active")}),n.on("cancel",function(){e.focus()}),u.bind(window,"resize",function(){n.hide()}),e.on("selectionchange nodechange",function(t){var a=t.element||e.selection.getNode(),i=e.plugins.wpview.getView(),o=jQuery(a),c=o.hasClass("wa-shortcode-wrap")?o:o.parents(".wa-shortcode-wrap");0!==c.length&&(t.preventDefault(),e.selection.select(c[0]),e.selection.collapse(),n.hide()),e.selection.isCollapsed()&&!i&&n.hide(),setTimeout(function(){var t,o;r&&(!e.selection.isCollapsed()&&(t=e.selection.getContent())&&(t.replace(/<[^>]+>/g,"").trim()||0===t.indexOf("<"))&&"HR"!==a.nodeName||i?(o=i?"view":"IMG"===a.nodeName?"img":"normal",n.show().reposition(o,i)):e.selection.isCollapsed()&&"IMG"!==a.nodeName&&!i&&s.fronted_options.media_upload?n.show().reposition("media",i):n.hide())},100)}),e.shortcuts.add("Alt+F10","",function(){var e=n.find("toolbar")[0];e&&e.focus(!0)}),n.renderTo(document.body).reflow().hide(),l(d,function(e){e.hide()}),{}):{}}});
window.Modernizr=function(e,t,n){function a(e){b.cssText=e}function r(e,t){return a(w.join(e+";")+(t||""))}function i(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function s(e,t){for(var a in e){var r=e[a];if(!o(r,"-")&&b[r]!==n)return"pfx"==t?r:!0}return!1}function c(e,t,a){for(var r in e){var o=t[e[r]];if(o!==n)return a===!1?e[r]:i(o,"function")?o.bind(a||t):o}return!1}function l(e,t,n){var a=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+k.join(a+" ")+a).split(" ");return i(t,"string")||i(t,"undefined")?s(r,t):(r=(e+" "+x.join(a+" ")+a).split(" "),c(r,t,n))}var u,m,d,f="2.8.3",_={},p=!0,g=t.documentElement,v="modernizr",h=t.createElement(v),b=h.style,w=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),y="Webkit Moz O ms",k=y.split(" "),x=y.toLowerCase().split(" "),D={},F=[],$=F.slice,A=function(e,n,a,r){var i,o,s,c,l=t.createElement("div"),u=t.body,m=u||t.createElement("body");if(parseInt(a,10))for(;a--;)s=t.createElement("div"),s.id=r?r[a]:v+(a+1),l.appendChild(s);return i=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),l.id=v,(u?l:m).innerHTML+=i,m.appendChild(l),u||(m.style.background="",m.style.overflow="hidden",c=g.style.overflow,g.style.overflow="hidden",g.appendChild(m)),o=n(l,e),u?l.parentNode.removeChild(l):(m.parentNode.removeChild(m),g.style.overflow=c),!!o},M=function(){function e(e,r){r=r||t.createElement(a[e]||"div"),e="on"+e;var o=e in r;return o||(r.setAttribute||(r=t.createElement("div")),r.setAttribute&&r.removeAttribute&&(r.setAttribute(e,""),o=i(r[e],"function"),i(r[e],"undefined")||(r[e]=n),r.removeAttribute(e))),r=null,o}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),S={}.hasOwnProperty;d=i(S,"undefined")||i(S.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return S.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=$.call(arguments,1),a=function(){if(this instanceof a){var r=function(){};r.prototype=t.prototype;var i=new r,o=t.apply(i,n.concat($.call(arguments)));return Object(o)===o?o:i}return t.apply(e,n.concat($.call(arguments)))};return a}),D.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},D.opacity=function(){return r("opacity:.55"),/^0.55$/.test(b.opacity)},D.cssanimations=function(){return l("animationName")},D.csstransforms=function(){return!!l("transform")},D.csstransforms3d=function(){var e=!!l("perspective");return e&&"webkitPerspective"in g.style&&A("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=9===t.offsetLeft&&3===t.offsetHeight}),e},D.csstransitions=function(){return l("transition")};for(var C in D)d(D,C)&&(m=C.toLowerCase(),_[m]=D[C](),F.push((_[m]?"":"no-")+m));return _.addTest=function(e,t){if("object"==typeof e)for(var a in e)d(e,a)&&_.addTest(a,e[a]);else{if(e=e.toLowerCase(),_[e]!==n)return _;t="function"==typeof t?t():t,"undefined"!=typeof p&&p&&(g.className+=" "+(t?"":"no-")+e),_[e]=t}return _},a(""),h=u=null,function(e,t){function n(e,t){var n=e.createElement("p"),a=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",a.insertBefore(n.lastChild,a.firstChild)}function a(){var e=h.elements;return"string"==typeof e?e.split(" "):e}function r(e){var t=v[e[p]];return t||(t={},g++,e[p]=g,v[g]=t),t}function i(e,n,a){if(n||(n=t),u)return n.createElement(e);a||(a=r(n));var i;return i=a.cache[e]?a.cache[e].cloneNode():_.test(e)?(a.cache[e]=a.createElem(e)).cloneNode():a.createElem(e),!i.canHaveChildren||f.test(e)||i.tagUrn?i:a.frag.appendChild(i)}function o(e,n){if(e||(e=t),u)return e.createDocumentFragment();n=n||r(e);for(var i=n.frag.cloneNode(),o=0,s=a(),c=s.length;c>o;o++)i.createElement(s[o]);return i}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return h.shivMethods?i(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+a().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(h,t.frag)}function c(e){e||(e=t);var a=r(e);return h.shivCSS&&!l&&!a.hasCSS&&(a.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||s(e,a),e}var l,u,m="3.7.0",d=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,_=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,p="_html5shiv",g=0,v={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",l="hidden"in e,u=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){l=!0,u=!0}}();var h={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:m,shivCSS:d.shivCSS!==!1,supportsUnknownElements:u,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:c,createElement:i,createDocumentFragment:o};e.html5=h,c(t)}(this,t),_._version=f,_._prefixes=w,_._domPrefixes=x,_._cssomPrefixes=k,_.hasEvent=M,_.testProp=function(e){return s([e])},_.testAllProps=l,_.testStyles=A,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" js "+F.join(" "):""),_}(this,this.document),function(e,t,n){function a(e){return"[object Function]"==g.call(e)}function r(e){return"string"==typeof e}function i(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=v.shift();h=1,e?e.t?_(function(){("c"==e.t?d.injectCss:d.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):h=0}function c(e,n,a,r,i,c,l){function u(t){if(!f&&o(m.readyState)&&(b.r=f=1,!h&&s(),m.onload=m.onreadystatechange=null,t)){"img"!=e&&_(function(){y.removeChild(m)},50);for(var a in $[n])$[n].hasOwnProperty(a)&&$[n][a].onload()}}var l=l||d.errorTimeout,m=t.createElement(e),f=0,g=0,b={t:a,s:n,e:i,a:c,x:l};1===$[n]&&(g=1,$[n]=[]),"object"==e?m.data=n:(m.src=n,m.type=e),m.width=m.height="0",m.onerror=m.onload=m.onreadystatechange=function(){u.call(this,g)},v.splice(r,0,b),"img"!=e&&(g||2===$[n]?(y.insertBefore(m,w?null:p),_(u,l)):$[n].push(m))}function l(e,t,n,a,i){return h=0,t=t||"j",r(e)?c("c"==t?x:k,e,t,this.i++,n,a,i):(v.splice(this.i++,0,e),1==v.length&&s()),this}function u(){var e=d;return e.loader={load:l,i:0},e}var m,d,f=t.documentElement,_=e.setTimeout,p=t.getElementsByTagName("script")[0],g={}.toString,v=[],h=0,b="MozAppearance"in f.style,w=b&&!!t.createRange().compareNode,y=w?f:p.parentNode,f=e.opera&&"[object Opera]"==g.call(e.opera),f=!!t.attachEvent&&!f,k=b?"object":f?"script":"img",x=f?"script":k,D=Array.isArray||function(e){return"[object Array]"==g.call(e)},F=[],$={},A={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};d=function(e){function t(e){var t,n,a,e=e.split("!"),r=F.length,i=e.pop(),o=e.length,i={url:i,origUrl:i,prefixes:e};for(n=0;o>n;n++)a=e[n].split("="),(t=A[a.shift()])&&(i=t(i,a));for(n=0;r>n;n++)i=F[n](i);return i}function o(e,r,i,o,s){var c=t(e),l=c.autoCallback;c.url.split(".").pop().split("?").shift(),c.bypass||(r&&(r=a(r)?r:r[e]||r[o]||r[e.split("/").pop().split("?")[0]]),c.instead?c.instead(e,r,i,o,s):($[c.url]?c.noexec=!0:$[c.url]=1,i.load(c.url,c.forceCSS||!c.forceJS&&"css"==c.url.split(".").pop().split("?").shift()?"c":n,c.noexec,c.attrs,c.timeout),(a(r)||a(l))&&i.load(function(){u(),r&&r(c.origUrl,s,o),l&&l(c.origUrl,s,o),$[c.url]=2})))}function s(e,t){function n(e,n){if(e){if(r(e))n||(m=function(){var e=[].slice.call(arguments);d.apply(this,e),f()}),o(e,m,t,0,l);else if(Object(e)===e)for(c in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(c)&&(!n&&!--s&&(a(m)?m=function(){var e=[].slice.call(arguments);d.apply(this,e),f()}:m[c]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),f()}}(d[c])),o(e[c],m,t,c,l))}else!n&&f()}var s,c,l=!!e.test,u=e.load||e.both,m=e.callback||i,d=m,f=e.complete||i;n(l?e.yep:e.nope,!!u),u&&n(u)}var c,l,m=this.yepnope.loader;if(r(e))o(e,0,m,0);else if(D(e))for(c=0;c<e.length;c++)l=e[c],r(l)?o(l,0,m,0):D(l)?d(l):Object(l)===l&&s(l,m);else Object(e)===e&&s(e,m)},d.addPrefix=function(e,t){A[e]=t},d.addFilter=function(e){F.push(e)},d.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",m=function(){t.removeEventListener("DOMContentLoaded",m,0),t.readyState="complete"},0)),e.yepnope=u(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,a,r,c,l){var u,m,f=t.createElement("script"),r=r||d.errorTimeout;f.src=e;for(m in a)f.setAttribute(m,a[m]);n=l?s:n||i,f.onreadystatechange=f.onload=function(){!u&&o(f.readyState)&&(u=1,n(),f.onload=f.onreadystatechange=null)},_(function(){u||(u=1,n(1))},r),c?f.onload():p.parentNode.insertBefore(f,p)},e.yepnope.injectCss=function(e,n,a,r,o,c){var l,r=t.createElement("link"),n=c?s:n||i;r.href=e,r.rel="stylesheet",r.type="text/css";for(l in a)r.setAttribute(l,a[l]);o||(p.parentNode.insertBefore(r,p),_(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("contenteditable","contentEditable"in document.documentElement),Modernizr.addTest("filereader",function(){return!!(window.File&&window.FileList&&window.FileReader)});
var fronted_featured_img=function(e,t){this.options=t,this.editor=e,this.has_thumbnail=!1,this.frame=!1,this.replace_this=!1,this.init()};!function(e){window.wp=window.wp||{},fronted_featured_img.prototype.init=function(){var e=this;0!==e.editor.find("img.attachment-post-thumbnail").length?(e.has_thumbnail=!0,e.replace_this=e.editor.find("img.attachment-post-thumbnail")):e.show_placeholder(),e.frame=window.wp.media({frame:"post",state:"featured-image",states:[new window.wp.media.controller.FeaturedImage,new window.wp.media.controller.EditImage]}),e.frame.state("featured-image").on("select",function(){e.frame.state().get("selection").single();"undefined"!=typeof e.replace_this&&e.replace_this!==!1?e.insert_image(e.frame,e.replace_this):e.insert_image(e.frame)}),e.create_toolbar()},fronted_featured_img.prototype.create_toolbar=function(){var e=this;featured_image_toolbar=document.createElement("div"),featured_image_toolbar.className="fronted-featured-image-toolbar",featured_image_toolbar.buttons=[{id:"add-image",icon:"dashicons dashicons-format-image",title:wa_fronted.i18n("Add image"),on_empty:!0,func:function(t){e.edit()}},{id:"edit-image",icon:"dashicons dashicons-edit",title:wa_fronted.i18n("Edit image"),on_empty:!1,func:function(t){wa_fronted.show_loading_spinner(),jQuery.post(global_vars.ajax_url,{action:"wa_get_thumbnail_id",post_id:e.options.post_id},function(t){""!==t.attachment_id&&t.attachment_id!==!1&&(window.wp.media.view.settings.post.featuredImageId=parseInt(t.attachment_id),e.edit(parseInt(t.attachment_id))),wa_fronted.hide_loading_spinner()})}},{id:"remove-image",icon:"dashicons dashicons-no",title:wa_fronted.i18n("Remove image"),on_empty:!1,func:function(t){wa_fronted.show_loading_spinner(),jQuery.post(global_vars.ajax_url,{action:"wa_delete_post_thumbnail",post_id:e.options.post_id},function(t){e.editor.find("img.attachment-post-thumbnail").remove(),e.has_thumbnail=!1,e.show_placeholder(),wa_fronted.hide_loading_spinner()})}}],featured_image_toolbar.buttons=wa_fronted.apply_filters("featured_image_toolbar",featured_image_toolbar.buttons,e.options);for(var t=0;t<featured_image_toolbar.buttons.length;t++){var n=featured_image_toolbar.buttons[t],a=document.createElement("button"),r=document.createElement("i");a.className="fronted-featured-image-"+n.id,r.className=n.icon,r.title=n.title,a.appendChild(r),featured_image_toolbar.appendChild(a),a.addEventListener("click",n.func)}document.body.appendChild(featured_image_toolbar),e.featured_image_toolbar=jQuery(featured_image_toolbar),e.editor.on("mouseenter click",function(t){e.show_toolbar(t,e)}),e.editor.on("mouseleave",function(t){e.hide_toolbar(t,e)}),e.featured_image_toolbar.on("mouseleave",function(t){e.hide_toolbar(t,e)})},fronted_featured_img.prototype.show_toolbar=function(e,t){e.preventDefault();var t=this;if(0!==t.featured_image_toolbar[0].buttons.length)for(var n=0;n<t.featured_image_toolbar[0].buttons.length;n++){var a=t.featured_image_toolbar[0].buttons[n],r=t.featured_image_toolbar.find(".fronted-featured-image-"+a.id);t.has_thumbnail?a.on_empty?r.removeClass("show"):r.addClass("show"):a.on_empty?r.addClass("show"):r.removeClass("show")}var i=t.editor.find("img.attachment-post-thumbnail");i=0===i.length?t.editor.find(".featured-post-placeholder"):i;var o=i.offset();t.featured_image_toolbar.css({width:i.width(),height:i.height(),top:o.top,left:o.left}).addClass("show")},fronted_featured_img.prototype.hide_toolbar=function(e,t){e.preventDefault();var t=this;null!==e.toElement&&-1===e.toElement.className.indexOf("fronted-featured-image-")&&t.featured_image_toolbar.removeClass("show")},fronted_featured_img.prototype.show_placeholder=function(){var e=this;0===e.editor.find(".featured-post-placeholder").length?e.editor.append('<div class="featured-post-placeholder"><i class="dashicons dashicons-format-image"></i></div>'):e.editor.find(".featured-post-placeholder").show(),e.replace_this=e.editor.find(".featured-post-placeholder")},fronted_featured_img.prototype.edit=function(e){var t=this.frame;e=e||!1,t.once("open",function(){var n=t.state().get("selection");e!==!1?(attachment=window.wp.media.attachment(e),attachment.fetch(),n.add(attachment)):n.reset()}),t.open()},fronted_featured_img.prototype.insert_image=function(e,t){var n=this,a=e.state(),r=a.get("selection"),t=t||!1;r&&r.each(function(e){var r,i,o=a.display(e).toJSON(),s=e.toJSON(),c=s.caption;window.wp.media.view.settings.captions||delete s.caption,o=window.wp.media.string.props(o,s),r={id:s.id,post_content:s.description,post_excerpt:c},"featured-image"!==a.id?(o.linkUrl&&(r.url=o.linkUrl),"image"===s.type?(o.url=o.src,i=window.wp.media.string.image(o),_.each({align:"align",size:"image-size",alt:"image_alt"},function(e,t){o[t]&&(r[e]=o[t])})):"video"===s.type?i=window.wp.media.string.video(o,s):"audio"===s.type?i=window.wp.media.string.audio(o,s):(i=window.wp.media.string.link(o),r.post_title=o.title),e.attributes.nonce=window.wp.media.view.settings.nonce.sendToEditor,e.attributes.attachment=r,e.attributes.html=i,e.attributes.post_id=window.wp.media.view.settings.post.id,t!==!1?window.wp.media.view.settings.captions&&c?wa_fronted.shortcode_to_html(e.attributes.html,!0,function(e){wa_fronted.replace_html(t,e),n.replace_this=!1,n.enable_resizing(n.instance,jQuery(n.instance.elements))}):(wa_fronted.replace_html(t,e.attributes.html),n.replace_this=!1):window.wp.media.view.settings.captions&&c?wa_fronted.shortcode_to_html(e.attributes.html,!0,function(e){wa_fronted.insertHtmlAtCaret(e),n.enable_resizing(n.instance,jQuery(n.instance.elements))}):wa_fronted.insertHtmlAtCaret(e.attributes.html)):(wa_fronted.show_loading_spinner(),jQuery.post(global_vars.ajax_url,{action:"wa_set_thumbnail",attachment_id:r.id,image_size:n.options.image_size,post_id:n.options.post_id},function(e){e.hasOwnProperty("html")&&t!==!1&&(wa_fronted.replace_html(t,e.html),n.replace_this=n.editor.find("img.attachment-post-thumbnail"),n.has_thumbnail=!0),wa_fronted.hide_loading_spinner()}))})}}(jQuery);
var EventManager=function(){function e(e,t,n,a){return"string"==typeof e&&"function"==typeof t&&(n=parseInt(n||10,10),s("actions",e,t,n,a)),u}function t(){var e=Array.prototype.slice.call(arguments),t=e.shift();return"string"==typeof t&&l("actions",t,e),u}function n(e,t){return"string"==typeof e&&o("actions",e,t),u}function a(e,t,n,a){return"string"==typeof e&&"function"==typeof t&&(n=parseInt(n||10,10),s("filters",e,t,n,a)),u}function r(){var e=Array.prototype.slice.call(arguments),t=e.shift();return"string"==typeof t?l("filters",t,e):u}function i(e,t){return"string"==typeof e&&o("filters",e,t),u}function o(e,t,n,a){if(m[e][t])if(n){var r,i=m[e][t];if(a)for(r=i.length;r--;){var o=i[r];o.callback===n&&o.context===a&&i.splice(r,1)}else for(r=i.length;r--;)i[r].callback===n&&i.splice(r,1)}else m[e][t]=[]}function s(e,t,n,a,r){var i={callback:n,priority:a,context:r},o=m[e][t];o?(o.push(i),o=c(o)):o=[i],m[e][t]=o}function c(e){for(var t,n,a,r=1,i=e.length;i>r;r++){for(t=e[r],n=r;(a=e[n-1])&&a.priority>t.priority;)e[n]=e[n-1],--n;e[n]=t}return e}function l(e,t,n){var a=m[e][t];if(!a)return"filters"===e?n[0]:!1;var r=0,i=a.length;if("filters"===e)for(;i>r;r++)n[0]=a[r].callback.apply(a[r].context,n);else for(;i>r;r++)a[r].callback.apply(a[r].context,n);return"filters"===e?n[0]:!0}var u={removeFilter:i,applyFilters:r,addFilter:a,removeAction:n,doAction:t,addAction:e},m={actions:{},filters:{}};return u};
function escape_regexp(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}window.wa_fronted={};var wa_fronted=window.wa_fronted;!function(e){window.wp=window.wp||{};var t=window.tinymce;e.fn.getCursorPosition=function(){var t=e(this).get(0),n=0;if("selectionStart"in t)n=t.selectionStart;else if("selection"in document){t.focus();var a=document.selection.createRange(),r=document.selection.createRange().text.length;a.moveStart("character",-t.value.length),n=a.text.length-r}return n},wa_fronted={options:e.parseJSON(global_vars.options),data:{editable_areas:[],timers:{},current_selection:!1,current_range:!1,current_editor_options:!1,has_changes:!1,has_errors:!1,is_saving:!1},add_action:function(){var e=arguments[0].split(" ");for(k in e)arguments[0]="wa_fronted."+e[k],wp.hooks.addAction.apply(this,arguments);return this},remove_action:function(){return arguments[0]="wa_fronted."+arguments[0],wp.hooks.removeAction.apply(this,arguments),this},do_action:function(){return arguments[0]="wa_fronted."+arguments[0],wp.hooks.doAction.apply(this,arguments),this},add_filter:function(){return arguments[0]="wa_fronted."+arguments[0],wp.hooks.addFilter.apply(this,arguments),this},remove_filter:function(){return arguments[0]="wa_fronted."+arguments[0],wp.hooks.removeFilter.apply(this,arguments),this},apply_filters:function(){return arguments[0]="wa_fronted."+arguments[0],wp.hooks.applyFilters.apply(this,arguments)},initialize:function(){var t=this;if("undefined"!=typeof t.options.editable_areas&&0!==t.options.editable_areas.length)if(global_vars.post_lock===!1||""===global_vars.post_lock){e.post(global_vars.ajax_url,{action:"wa_fronted_set_post_lock",post_id:global_vars.post_id},function(e){wp.heartbeat.enqueue("wa_fronted_post_lock",{post_id:global_vars.post_id},!1)}),rangy.init();for(var n=function(n,r){r=e(r),r.addClass("wa-fronted-editor"),t.setup_editor(r,t.options.editable_areas[a],t.options),t.data.editable_areas.push({editor:r,options:t.options.editable_areas[a]})},a=0;a<t.options.editable_areas.length;a++){var r=e(t.options.editable_areas[a].container);0!==r.length&&e.each(r,n)}toastr.options.timeOut="7000",toastr.options.positionClass="toast-bottom-right",toastr.options.closeButton=!0;var i=e("#wa-fronted-revisions").attr("data-post-id");i&&t.check_autosave(i),t.do_action("on_init"),t.bind()}else t.show_post_lock_notice(global_vars.post_lock,global_vars.global_post_id)},bind:function(){var t=this;e("#wa-fronted-save").click(function(){t.save()}),e("#wa-fronted-settings").click(function(){e("#wa-fronted-revisions-modal").fadeOut("fast"),e("#wa-fronted-settings-modal").fadeIn("fast"),e("html, body").addClass("wa-modal-open")}),e("#wa-fronted-revisions").click(function(){e("#wa-fronted-settings-modal").fadeOut("fast"),e("html, body").removeClass("wa-modal-open");var n=e(this).attr("data-post-id");t.show_revision_modal(n)}),e(".close-wa-fronted-modal").click(function(){e("#wa-fronted-settings-modal, #wa-fronted-revisions-modal").fadeOut("fast"),e("html, body").removeClass("wa-modal-open")});var n=e(".wa_fronted_datepicker");n.each(function(t,n){var a=e(n),r={dateFormat:"yy-mm-dd",beforeShow:function(e,t){t.dpDiv.addClass("wa-fronted-datepicker")}};"false"!==a.attr("data-time")?r.timeFormat="HH:mm:ss":r.showTimepicker=!1,a.datetimepicker(r),a.datetimepicker("setDate",a.val())}),e("#wa-fronted-settings-modal select").select2({minimumResultsForSearch:10,dropdownCssClass:"wa-fronted-select2",formatNoMatches:function(n){var a=t.i18n("No results found.");if(""!==n){var r=e(this);taxonomy=r.attr("data-tax"),is_hierarchical=r.attr("data-hierarchical"),a+=' <a class="wa-add-tax-btn" href="javascript:void(0)" onclick="wa_fronted.add_tax_term(\''+n+"', '"+taxonomy+"', "+is_hierarchical+')"><i class="dashicons dashicons-plus"></i> '+t.i18n("Add")+"</a>"}return a}}),t.do_action("on_bind"),e(document).on("heartbeat-tick.wa_fronted_post_lock",function(e,n){n.hasOwnProperty("wa_fronted_post_lock")&&(n.wa_fronted_post_lock.is_locked!==!1&&""!==n.wa_fronted_post_lock.is_locked?t.show_post_lock_notice(n.wa_fronted_post_lock.is_locked,global_vars.global_post_id):wp.heartbeat.enqueue("wa_fronted_post_lock",{post_id:n.wa_fronted_post_lock.post_id},!1))}),window.onbeforeunload=function(){return t.data.has_changes&&!t.data.is_saving?t.i18n("The changes you have made will be lost if you navigate away from this page."):void 0}},setup_editor:function(n,a,r){var i=this,o={selector:a.container,theme:"fronted",toolbar:["bold","italic","strikethrough","bullist","numlist","blockquote","alignleft","aligncenter","alignright","link","unlink","h2","h3"],plugins:["hr","lists","media","paste","wordpress","wplink","wpdialogs","wpview"],inline:!0,relative_urls:!1,convert_urls:!1,paste_as_text:!0,browser_spellcheck:!0,directionality:a.direction,wpeditimage_html5_captions:!0,fronted_options:a,wpautop:!1,setup:function(t){a.paragraphs!==!0&&(t.on("keydown",function(e){return 13===e.which?(e.preventDefault(),e.stopPropagation(),!1):!0}),t.on("blur",function(e){t.setContent(t.getContent({format:"text"}))})),t.on("paste",function(n){var a=n.clipboardData.getData("text/plain");!a||-1===a.indexOf("http://")&&-1===a.indexOf("https://")||(n.preventDefault(),i.show_loading_spinner(),e.post(global_vars.ajax_url,{action:"wa_get_oembed",link:a},function(e){t.insertContent(e.oembed!==!1?e.oembed:'<a href="'+a+'">'+a+"</a>"),i.hide_loading_spinner()}))}),t.on("change",function(e){clearTimeout(i.data.timers[t.id]),i.data.timers[t.id]=setTimeout(function(){i.data.has_changes=!0,i.validate(n,a),i.autosave(n,a),i.show_save_button()},1e3)}),t.on("click",function(e){if("A"===e.target.nodeName&&e.ctrlKey){var t=window.open(e.target.href,"_blank");t.focus()}}),t.on("focus",function(e){window.wpActiveEditor=t.id}),i.do_action("on_tinymce_setup",t,a,r)}};if(void 0===a.toolbar&&(a.toolbar="full"),"false"===a.toolbar||a.toolbar===!1?o.toolbar=!1:"full"!==a.toolbar&&(o.toolbar=a.toolbar.replace(/\s+/g,"").split(",")),"false"!==a.toolbar&&a.toolbar!==!1&&(o.toolbar=i.apply_filters("toolbar_buttons",o.toolbar,a)),n.click(function(){var t=window.getSelection();t&&(i.data.current_selection=e.extend({},t),t.rangeCount&&(i.data.current_range=t.getRangeAt(0)))}),"only"!==a.media_upload&&a["native"]){if("meta_select"!==a.field_type)a.media_upload===!0&&o.plugins.push("fronted_image"),a.shortcodes===!0&&o.plugins.push("fronted_shortcode"),o.plugins=i.apply_filters("editor_plugins",o.plugins,a),t.init(o);else if(a.hasOwnProperty("values")&&a.values.length>1&&a.hasOwnProperty("meta_key")&&a["native"]){var s=document.createElement("select");s.id="select_"+a.meta_key,s.name="select_"+a.meta_key,s.className="wa_fronted_select";for(var l=0;l<a.values.length;l++){var c=a.values[l],u=document.createElement("option");u.value=c.value,u.innerHTML=c.label,c.hasOwnProperty("selected")&&c.selected&&(u.selected=!0,n.attr("data-db-value",c.value)),s.appendChild(u)}document.body.appendChild(s);var s=e(s);s.select2({minimumResultsForSearch:10}),s.on("change",function(e){var t=s.val();i.specific_output_to(n,a,t,t)||(n.html(t),n.attr("data-db-value",t))});var m=n.width(),d=n.position(),_=s.data("select2").container,f=s.data("select2").dropdown;_.css({left:d.left+(m/2-_.width()/2)+"px"}).addClass("wa-fronted-selectmenu");var p,g=function(){p=setTimeout(function(){_.removeClass("show"),s.select2("close")},500)};n.hover(function(){clearTimeout(p);var e=n.position();_.css({top:e.top+"px"}).addClass("show")},g),_.hover(function(){clearTimeout(p)},g),f.hover(function(){clearTimeout(p)},g)}}else"only"===a.media_upload&&a["native"]?new fronted_featured_img(n,a):i.do_action("on_setup_editor",n,a,r)},autosave:function(n,a){var r=this;0!==global_vars.post_revisions&&(clearTimeout(r.data.timers.autosave),r.data.timers.autosave=setTimeout(function(){if(!r.data.is_saving){for(var n=r.data.editable_areas,a=[],i=0;i<n.length;i++)if("post_thumbnail"!==n[i].options.field_type){var o=n[i].editor.attr("data-db-value"),s="";s="undefined"!=typeof o&&o!==!1?o:t.editors[n[i].editor[0].id].getContent(),a.push({content:s,options:n[i].options,extra:r.apply_filters("autosave_extra_data","",s,n[i].options)})}e.post(global_vars.ajax_url,{action:"wa_fronted_autosave",data:a,wa_fronted_save_nonce:global_vars.nonce},function(e){e.success&&toastr.info(r.i18n("A draft of this post has been saved automatically"),r.i18n("Draft autosaved"))})}},1e4))},save:function(){var n=this,a=n.data.editable_areas,r=[];if(n.show_loading_spinner(),n.data.has_errors){for(var i=0;i<a.length;i++)a[i].options.hasOwnProperty("has_errors")&&a[i].options.has_errors&&(a[i].editor.tipso("destroy"),a[i].editor.tipso({content:n.validation_msg(a[i].options.validation.type,a[i].options.validation.compare),useTitle:!1,background:"#bd362f"}),a[i].editor.tipso("show"));n.hide_loading_spinner(),toastr.error(n.i18n("There were validation errors!"),n.i18n("Save unsuccessful"))}else{n.data.is_saving=!0;for(var i=0;i<a.length;i++)if("post_thumbnail"!==a[i].options.field_type){var o=a[i].editor.attr("data-db-value"),s="";s="undefined"!=typeof o&&o!==!1?o:t.editors[a[i].editor[0].id].getContent(),r.push({content:s,options:a[i].options,extra:n.apply_filters("save_extra_data","",s,a[i].options)})}e.post(global_vars.ajax_url,{action:"wa_fronted_save",data:r,wa_fronted_save_nonce:global_vars.nonce},function(e){e.success?toastr.success(n.i18n("Contents have been saved successfully"),n.i18n("Save successful")):"undefined"!=typeof e.error&&toastr.error(e.error,n.i18n("Save unsuccessful")),n.data.is_saving=!1,n.hide_loading_spinner()})}},show_save_button:function(){e("#wa-fronted-save").fadeIn("fast")},show_loading_spinner:function(){e("#wa-fronted-spinner").fadeIn("fast")},hide_loading_spinner:function(){e("#wa-fronted-spinner").fadeOut("fast")},shortcode_from_attr:function(e){return decodeURIComponent(e.attr("data-shortcode"))},shortcode_to_html:function(t,n,a){e.post(global_vars.ajax_url,{action:"wa_render_shortcode",shortcode:t,comments:n},function(e){a(e)})},getCaretPositionPx:function(){var e=0,t=0,n=window.getSelection();if(n.rangeCount){var a=n.getRangeAt(0);if(a.getClientRects){var r=a.getClientRects();r.length>0&&(e=r[0].left,t=r[0].top)}if(0==e&&0==t){var i=window.document.createElement("span");if(i.getClientRects){i.appendChild(window.document.createTextNode("​")),a.insertNode(i),rect=i.getClientRects()[0],e=rect.left,t=rect.top;var o=i.parentNode;o.removeChild(i),o.normalize()}}}return{x:e,y:t}},getSelectionText:function(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e},specific_output_to:function(e,t,n,a){if(!t.hasOwnProperty("output_to"))return!1;if(t.output_to.hasOwnProperty("selector")){var r=e.find(t.output_to.selector);if(0===r.length)return!1;t.output_to.hasOwnProperty("attr")?r.attr(t.output_to.attr,a):r.html(a)}else if(Array.isArray(t.output_to))for(var i=0;i<t.output_to.length;i++){var o=t.output_to[i];if(o.hasOwnProperty("selector")){var r=e.find(o.selector);if(0===r.length)return!1;o.hasOwnProperty("attr")?r.attr(o.attr,a):r.html(a)}}else{var r=e;t.output_to.hasOwnProperty("attr")?r.attr(t.output_to.attr,a):r.html(a)}return e.attr("data-db-value",n),!0},insertHtmlAtCaret:function(e,t,n){var a=this;if(t=t||!1,n=n||!1,window.getSelection){t===!1&&n===!1&&("undefined"==typeof a.data.current_selection||a.data.current_selection===!1?(t=window.getSelection(),n=t.getRangeAt(0)):(t=a.data.current_selection,n=a.data.current_range)),"undefined"!=typeof n&&n!==!1&&n.deleteContents();var r=document.createElement("div");r.innerHTML=e;for(var i,o,s=document.createDocumentFragment();i=r.firstChild;)o=s.appendChild(i);n.insertNode(s),a.current_selection=!1}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)},replace_html:function(t,n){el=e(t),el.replaceWith(n)},validate:function(e,t){var n=this;t.validation!==!1&&(n.validator(e.text(),t.validation.type,t.validation.compare)?(e.tipso("hide"),e.tipso("destroy")):(n.data.has_errors=!0,t.has_errors=!0,e.tipso({content:n.validation_msg(t.validation.type,t.validation.compare),useTitle:!1,background:"#23282d"}),e.tipso("show")))},add_tax_term:function(t,n,a){var r=this,i={action:"wa_add_tax_term",term:t,taxonomy:n};r.show_loading_spinner(),e.post(global_vars.ajax_url,i,function(a){e('<option value="'+a.term_id+'" selected>'+t+"</option>").appendTo("#wa_fronted_tax_"+n),e("#wa_fronted_tax_"+n).trigger("change"),r.hide_loading_spinner()})},get_revisions:function(t,n){var a=this;a.show_loading_spinner(),e.post(global_vars.ajax_url,{action:"wa_get_revisions",post_id:t},function(e){a.hide_loading_spinner(),n(e)})},switch_to_revision:function(e){for(var n=this,a=n.data.editable_areas,r=0;r<a.length;r++){var i=!1,o=!1;e.hasOwnProperty(a[r].options.field_type)&&(i=e[a[r].options.field_type]);var s=n.apply_filters("revision_db_value",i,a[r],e);if(o=n.apply_filters("revision_content",i,a[r],e),o!==!1){n.specific_output_to(a[r].editor,a[r].options,s,o)||a[r].editor.html(o);var l=t.get(a[r].editor.attr("id"));null!==l&&l.hasOwnProperty("shortcode_edit")&&l.shortcode_edit.bind_shortcode_edit(a[r].editor),n.validate(a[r].editor,a[r].options)}}n.data.has_changes=!0,n.show_save_button()},show_revision_modal:function(t,n){var a=this;n=n||!1,a.get_revisions(t,function(t){if(0!==t.length){var r=t.length-1;revision_input=e("#wa_fronted_switch_revision"),-1!==t[r].post_name.indexOf("-autosave-v1")&&(r-=1),n&&(r=t.length-1,a.switch_to_revision(t[r])),revision_input.val(t[r].post_date),r===t.length-1?(e("#wa-previous-revision").removeClass("disabled"),e("#wa-next-revision").addClass("disabled")):0===r?(e("#wa-next-revision").removeClass("disabled"),e("#wa-previous-revision").addClass("disabled")):(e("#wa-next-revision").removeClass("disabled"),e("#wa-previous-revision").removeClass("disabled")),e("#wa-previous-revision, #wa-next-revision").off(),e("#wa-previous-revision").on("click",function(n){n.preventDefault(),r-1>=0&&(e("#wa-next-revision").removeClass("disabled"),r-=1,revision_input.val(t[r].post_date),a.switch_to_revision(t[r]),0===r&&e(this).addClass("disabled"))}),e("#wa-next-revision").on("click",function(n){n.preventDefault(),r+1<=t.length-1&&(e("#wa-previous-revision").removeClass("disabled"),r+=1,revision_input.val(t[r].post_date),a.switch_to_revision(t[r]),r===t.length-1&&e(this).addClass("disabled"))}),e("#wa-fronted-revisions-modal").fadeIn("fast")}})},check_autosave:function(t){var n=this;e.post(global_vars.ajax_url,{action:"wa_fronted_get_autosave",post_id:t},function(e){e.success&&e.data!==!1&&confirm(n.i18n("There is an autosave of this post that is more recent than the version below. View the autosave?"))&&n.show_revision_modal(t,!0)})},show_post_lock_notice:function(t,n){var a=this;confirm(a.i18n("Another user is currently editing this post. Take over?"))&&e.post(global_vars.ajax_url,{action:"wa_fronted_set_post_lock",post_id:n},function(e){e.success&&e.data!==!1&&location.reload()})},i18n:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(global_vars.i18n.hasOwnProperty(t)&&(t=global_vars.i18n[t]),-1!==t.indexOf("%s")&&Array.isArray(e)&&0!==e.length)for(var n=0;n<e.length;n++)t=t.replace("%s",e[n]);return t}},e(document).ready(function(){"undefined"!=typeof global_vars.options&&Modernizr.contenteditable&&(window.wp=window.wp||{},"undefined"==typeof window.wp.hooks&&(window.wp.hooks=new EventManager),wa_fronted.initialize())})}(jQuery);
var wa_fronted=wa_fronted||{};!function(e){wa_fronted.validator=function(e,t,n){return wa_fronted.validators.hasOwnProperty(t)&&"function"==typeof wa_fronted.validators[t]?wa_fronted.validators[t](e,n):wa_fronted.apply_filters("validate",!0,e,t,n)},wa_fronted.validators={not_blank:function(e){return""===e.trim()||null===e?!1:!0},is_date:function(e){return!isNaN(Date.parse(e))},is_email:function(e){var t=new RegExp(/^(("[\w-+\s]+")|([\w-+]+(?:\.[\w-+]+)*)|("[\w-+\s]+")([\w-+]+(?:\.[\w-+]+)*))(@((?:[\w-+]+\.)*\w[\w-+]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][\d]\.|1[\d]{2}\.|[\d]{1,2}\.))((25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\.){2}(25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\]?$)/i);return t.test(e)},is_num:function(t){return e.isNumeric(parseFloat(t))},contains_num:function(t){return t=t.replace(/[^\d.-]/g,""),e.isNumeric(parseFloat(t))},is_alphanum:function(e){var t=new RegExp(/^([0-9]|[a-z])+([0-9a-z]+)$/i);return t.text(e)},is_url:function(e){var t=new RegExp(/^[a-z](?:[-a-z0-9\+\.])*:(?:\/\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD])*@)?(?:\[(?:(?:(?:[0-9a-f]{1,4}:){6}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|::(?:[0-9a-f]{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4}:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+[-a-z0-9\._~!\$&'\(\)\*\+,;=:]+)\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}|(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD])*)(?::[0-9]*)?(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD]))*)*|\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD]))*)*)?|(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD])))(?:\?(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\/\?\xA0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E\uDB80-\uDBBE\uDBC0-\uDBFE][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDC00-\uDFFD])*)?(?:\#(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\/\?\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD])*)?$/i);return t.text(e)},is_tel:function(e){var t=new RegExp(/\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/g);return t.text(e)},min_length:function(e,t){return e.length>=parseFloat(t)},max_length:function(e,t){return e.length<=parseFloat(t)},is_length:function(e,t){return e.length===parseFloat(t)},min:function(e,t){var n=this;return n.is_num(e)&&parseFloat(e)>=parseFloat(t)},max:function(e,t){var n=this;return n.is_num(e)&&parseFloat(e)<=parseFloat(t)},between:function(t,n){var a=this;return t=parseFloat(t),e.isArray(n)&&a.is_num(t)&&t>=n[0]&&t<=n[1]},equal_to:function(e,t){return parseFloat(e)===parseFloat(t)}},wa_fronted.validation_msg=function(e,t){t=t||!1;var n="";switch(e){case"not_blank":n=wa_fronted.i18n("Cannot be empty");break;case"is_date":n=wa_fronted.i18n("Must be a date");break;case"is_email":n=wa_fronted.i18n("Must be a valid email address");break;case"is_num":n=wa_fronted.i18n("Must be a number");break;case"contains_num":n=wa_fronted.i18n("Must contain a number");break;case"is_alphanum":n=wa_fronted.i18n("Can only be letters or numbers");break;case"is_url":n=wa_fronted.i18n("Must be an url");break;case"is_tel":n=wa_fronted.i18n("Must be a phone number");break;case"min_length":n=wa_fronted.i18n("Must be more than %s characters",t);break;case"max_length":n=wa_fronted.i18n("Must be less than %s characters",t);break;case"is_length":n=wa_fronted.i18n("Must be %s characters",t);break;case"min":n=wa_fronted.i18n("Must be greater than ",t);break;case"max":n=wa_fronted.i18n("Must be less than ",t);break;case"between":n=wa_fronted.i18n("Must be between %s and %s",t[0],t[1]);break;case"equal_to":n=wa_fronted.i18n("Must be ",t);break;default:n=wa_fronted.apply_filters("validation_msg",n,e,t)}return n}}(jQuery);
