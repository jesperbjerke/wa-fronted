window.wp=window.wp||{},tinymce.PluginManager.add("fronted_shortcode",function(o){var t=(window.tinymce,o);o.shortcode_edit={bind_shortcode_edit:function(o){var t=this;o=jQuery(o),o.find(".wa-shortcode-wrap").off("hover").hover(function(){t.show_shortcode_button(jQuery(this),o)},function(){t.hide_shortcode_button()})},show_shortcode_button:function(o,e){var r=this,d=o.children(),n=0!==d.length?jQuery(d[0]):o,s=n.offset(),i=jQuery(window).scrollTop(),a=s.top-i,c=s.top,h=jQuery("#wa-fronted-edit-shortcode");h.removeClass("arrow-over arrow-under"),42>=a?(c=s.top+n.height()+42,h.addClass("arrow-over")):h.addClass("arrow-under"),h.css({left:s.left+(n.width()/2-h.width()/2),top:c}).addClass("show").hover(function(){jQuery(this).addClass("show")},function(){r.hide_shortcode_button()});var f=h.find("#wa-fronted-edit-shortcode-button"),_=h.find("#wa-fronted-remove-shortcode-button");f.addClass("show"),f.off(),f.on("click",function(t){t.preventDefault(),r.show_shortcode_edit(o,e)}),_.addClass("show"),_.off(),_.one("click",function(e){e.preventDefault(),o.remove(),r.hide_shortcode_button(),t.fire("change")})},hide_shortcode_button:function(){jQuery("#wa-fronted-edit-shortcode").removeClass("show"),jQuery("#wa-fronted-edit-shortcode-button").addClass("show"),jQuery("#wa-fronted-remove-shortcode-button").addClass("show"),jQuery("#wa-fronted-edit-shortcode .shortcode-input-wrapper").removeClass("show")},show_shortcode_edit:function(o,t){var e=this,r=wa_fronted.shortcode_from_attr(o),d=o.attr("data-shortcode-base"),n=wa_fronted.apply_filters("shortcode_actions",["gallery"]);if(-1!==n.indexOf(d))wa_fronted.is_editing_shortcode=o,wa_fronted.do_action("shortcode_action_"+d,r,o);else{var s=o.children(),i=0!==s.length?jQuery(s[0]):o,a=i.offset(),c=jQuery("#wa-fronted-edit-shortcode");jQuery("#wa-fronted-edit-shortcode-button").removeClass("show"),jQuery("#wa-fronted-remove-shortcode-button").removeClass("show"),c.find(".shortcode-input-wrapper").addClass("show"),c.find("#submit-shortcode").off().one("click",function(r){r.preventDefault(),wa_fronted.show_loading_spinner();var d=c.find("#wa_fronted_shortcode_input").val();wa_fronted.shortcode_to_html(d,!1,function(r){""!==r?(wa_fronted.replace_html(o,r),e.bind_shortcode_edit(t)):toastr.error(wa_fronted.i18n("Render unsuccessful"),wa_fronted.i18n("Sent code is not a valid shortcode")),wa_fronted.hide_loading_spinner()})}),c.css({left:a.left+(i.width()/2-c.width()/2)}).find("input").val(r).focus()}}},o.addButton("render_shortcode",{tooltip:wa_fronted.i18n("Render as shortcode"),text:"[ ]",context:"insert",onclick:function(){wa_fronted.show_loading_spinner();var t=o.selection.getContent({format:"text"});wa_fronted.shortcode_to_html(t,!0,function(t){""!==t?o.selection.setContent(t):toastr.error(wa_fronted.i18n("Render unsuccessful"),wa_fronted.i18n("Selected text is not a valid shortcode")),o.shortcode_edit.bind_shortcode_edit(o.targetElm),wa_fronted.hide_loading_spinner()})}}),o.settings.toolbar.push("render_shortcode"),jQuery(window).load(function(){o.shortcode_edit.bind_shortcode_edit(o.targetElm)})});
window.wp=window.wp||{},tinymce.PluginManager.add("fronted_image",function(e){function t(e){return e=e.replace(/(?:<p>)?\[(?:wp_)?caption([^\]]+)\]([\s\S]+?)\[\/(?:wp_)?caption\](?:<\/p>)?/g,function(e,t,n){var a,o,i,r,s,d,c=l.trim;return a=t.match(/id=['"]([^'"]*)['"] ?/),a&&(t=t.replace(a[0],"")),o=t.match(/align=['"]([^'"]*)['"] ?/),o&&(t=t.replace(o[0],"")),i=t.match(/class=['"]([^'"]*)['"] ?/),i&&(t=t.replace(i[0],"")),d=t.match(/width=['"]([0-9]*)['"] ?/),d&&(t=t.replace(d[0],"")),n=c(n),s=n.match(/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i),s&&s[2]?(r=c(s[2]),s=c(s[1])):(r=c(t).replace(/caption=['"]/,"").replace(/['"]$/,""),s=n),a=a&&a[1]?a[1].replace(/[<>&]+/g,""):"",o=o&&o[1]?o[1]:"alignnone",i=i&&i[1]?" "+i[1].replace(/[<>&]+/g,""):"",!d&&s&&(d=s.match(/width=['"]([0-9]*)['"]/)),d&&d[1]&&(d=d[1]),d&&r?(d=parseInt(d,10),p||(d+=10),'<div class="mceTemp"><'+g+' id="'+a+'" class="wp-caption '+o+i+'" style="width: '+d+'px"><'+m+' class="wp-caption-dt">'+s+"</"+m+"><"+h+' class="wp-caption-dd wp-caption-text">'+r+"</"+h+"></"+g+"></div>"):n})}function n(e){return e.replace(/<div (?:id="attachment_|class="mceTemp)[^>]*>([\s\S]+?)<\/div>/g,function(e,t){var n="";return-1===t.indexOf("<img ")?(n=t.match(new RegExp("<"+h+" [^>]+>([\\s\\S]+?)<\\/"+h+">","i")),n&&n[1]?"<p>"+n[1]+"</p>":""):(n=t.replace(new RegExp("<"+g+" ([^>]+)>\\s*<"+m+" [^>]+>([\\s\\S]+?)<\\/"+m+">\\s*<"+h+" [^>]+>([\\s\\S]*?)<\\/"+h+">\\s*<\\/"+g+">","gi"),function(e,t,n,a){var o,i,r,s;return s=n.match(/width="([0-9]*)"/),s=s&&s[1]?s[1]:"",s&&a?(o=t.match(/id="([^"]*)"/),o=o&&o[1]?o[1]:"",i=t.match(/class="([^"]*)"/),i=i&&i[1]?i[1]:"",r=i.match(/align[a-z]+/i)||"alignnone",i=i.replace(/wp-caption ?|align[a-z]+ ?/gi,""),i&&(i=' class="'+i+'"'),a=a.replace(/\r\n|\r/g,"\n").replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")}),a=a.replace(/\s*\n\s*/g,"<br />"),'[caption id="'+o+'" align="'+r+'" width="'+s+'"'+i+"]"+n+" "+a+"[/caption]"):n}),n=l.trim(n),0!==n.indexOf("[caption")&&(n=t.replace(/[\s\S]*?((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)(<p>[\s\S]*<\/p>)?[\s\S]*/gi,"<p>$1</p>$2")),n)})}function a(t){var n,a,o,i,r,s,d,c,p=[],g=e.dom,m=/^\d+$/;return o={attachment_id:!1,size:"custom",caption:"",align:"none",extraClasses:"",link:!1,linkUrl:"",linkClassName:"",linkTargetBlank:!1,linkRel:"",title:""},o.url=g.getAttrib(t,"src"),o.alt=g.getAttrib(t,"alt"),o.title=g.getAttrib(t,"title"),d=g.getAttrib(t,"width"),c=g.getAttrib(t,"height"),(!m.test(d)||parseInt(d,10)<1)&&(d=t.naturalWidth||t.width),(!m.test(c)||parseInt(c,10)<1)&&(c=t.naturalHeight||t.height),o.customWidth=o.width=d,o.customHeight=o.height=c,n=l.explode(t.className," "),a=[],l.each(n,function(e){/^wp-image/.test(e)?o.attachment_id=parseInt(e.replace("wp-image-",""),10):/^align/.test(e)?o.align=e.replace("align",""):/^size/.test(e)?o.size=e.replace("size-",""):a.push(e)}),o.extraClasses=a.join(" "),i=g.getParents(t,".wp-caption"),i.length&&(i=i[0],n=i.className.split(" "),l.each(n,function(e){/^align/.test(e)?o.align=e.replace("align",""):e&&"wp-caption"!==e&&p.push(e)}),o.captionClassName=p.join(" "),r=g.select(".wp-caption-dd",i),r.length&&(r=r[0],o.caption=e.serializer.serialize(r).replace(/<br[^>]*>/g,"$&\n").replace(/^<p>/,"").replace(/<\/p>$/,""))),t.parentNode&&"A"===t.parentNode.nodeName&&(s=t.parentNode,o.linkUrl=g.getAttrib(s,"href"),o.linkTargetBlank="_blank"===g.getAttrib(s,"target")?!0:!1,o.linkRel=g.getAttrib(s,"rel"),o.linkClassName=s.className),o}function o(e){return e&&!(!e.textContent&&!e.innerText)}function i(t,n){var a,i,r,s,d,c,u,f,w,_,v,N,y,C,b,x,A=e.dom;a=l.explode(n.extraClasses," "),a||(a=[]),n.caption||a.push("align"+n.align),n.attachment_id&&(a.push("wp-image-"+n.attachment_id),n.size&&"custom"!==n.size&&a.push("size-"+n.size)),C=n.width,b=n.height,"custom"===n.size&&(C=n.customWidth,b=n.customHeight),N={src:n.url,width:C||null,height:b||null,alt:n.alt,title:n.title||null,"class":a.join(" ")||null},A.setAttribs(t,N),y={href:n.linkUrl,rel:n.linkRel||null,target:n.linkTargetBlank?"_blank":null,"class":n.linkClassName||null},t.parentNode&&"A"===t.parentNode.nodeName&&!o(t.parentNode)?n.linkUrl?A.setAttribs(t.parentNode,y):A.remove(t.parentNode,!0):n.linkUrl&&((u=A.getParent(t,"a"))&&A.insertAfter(t,u),u=A.create("a",y),t.parentNode.insertBefore(u,t),u.appendChild(t)),f=e.dom.getParent(t,".mceTemp"),r=t.parentNode&&"A"===t.parentNode.nodeName&&!o(t.parentNode)?t.parentNode:t,n.caption?(v=n.attachment_id?"attachment_"+n.attachment_id:null,x="align"+(n.align||"none"),i="wp-caption "+x,n.captionClassName&&(i+=" "+n.captionClassName.replace(/[<>&]+/g,"")),p||(C=parseInt(C,10),C+=10),f?(_=A.select(".wp-caption",f),_.length&&A.setAttribs(_,{id:v,"class":i,style:"width: "+C+"px"}),w=A.select(".wp-caption-dd",f),w.length&&A.setHTML(w[0],n.caption)):(v=v?'id="'+v+'" ':"",s="<"+g+" "+v+'class="'+i+'" style="width: '+C+'px"><'+m+' class="wp-caption-dt">'+A.getOuterHTML(r)+"</"+m+"><"+h+' class="wp-caption-dd wp-caption-text">'+n.caption+"</"+h+"></"+g+">",(d=A.getParent(r,"p"))?(c=A.create("div",{"class":"mceTemp"},s),d.parentNode.insertBefore(c,d),A.remove(r),A.isEmpty(d)&&A.remove(d)):A.setOuterHTML(r,'<div class="mceTemp">'+s+"</div>"))):f&&(d=A.create("p"),f.parentNode.insertBefore(d,f),d.appendChild(r),A.remove(f)),wp.media.events&&wp.media.events.trigger("editor:image-update",{editor:e,metadata:n,image:t}),e.nodeChanged()}function r(t){var n,o,r;return"undefined"!=typeof wp&&wp.media?(r=a(t),wp.media.events.trigger("editor:image-edit",{editor:e,metadata:r,image:t}),n=wp.media({frame:"image",state:"image-details",metadata:r}),wp.media.events.trigger("editor:frame-create",{frame:n}),o=function(a){e.focus(),e.undoManager.transact(function(){i(t,a)}),n.detach()},n.state("image-details").on("update",o),n.state("replace-image").on("replace",o),n.on("close",function(){e.focus(),n.detach()}),void n.open()):void e.execCommand("mceImage")}function s(t){var n;"DIV"===t.nodeName&&e.dom.hasClass(t,"mceTemp")?n=t:("IMG"===t.nodeName||"DT"===t.nodeName||"A"===t.nodeName)&&(n=e.dom.getParent(t,"div.mceTemp")),null===n&&null!==e.dom.getParent(t,"a")&&(n=e.dom.getParent(t,"a")),n?(e.selection.select(n.nextSibling?n.nextSibling:n.previousSibling?n.previousSibling:n.parentNode),e.selection.collapse(!0),e.nodeChanged(),e.dom.remove(n)):e.dom.remove(t),jQuery(e.targetElm).find("p:empty").remove(),e.theme.panel.hide(),e.focus()}function d(t,n){n=n||!1;var a=t.states.get("gallery-edit");if(library=a.get("library"),0!==library.length){var o=wp.media.gallery.shortcode(library).string();wa_fronted.shortcode_to_html(o,n===!1?!0:!1,function(t){n!==!1?wa_fronted.replace_html(n,t):e.selection.setContent(t),e.hasOwnProperty("shortcode_edit")&&e.shortcode_edit.bind_shortcode_edit(e.targetElm)})}}function c(e){var t,n,a=wp.shortcode.next("gallery",e),o=wp.media.gallery.defaults.id;return a?(a=a.shortcode,_.isUndefined(a.get("id"))&&!_.isUndefined(o)&&a.set("id",o),t=wp.media.gallery.attachments(a),n=new wp.media.model.Selection(t.models,{props:t.props.toJSON(),multiple:!0}),n.gallery=t.gallery,n.more().done(function(){n.props.set({query:!1}),n.unmirror(),n.props.unset("orderby")}),n):!1}var l=window.tinymce,p=e.getParam("wpeditimage_html5_captions"),g=p?"figure":"dl",m=p?"section":"dt",h=p?"figcaption":"dd",u=!1,f={aspect_ratio:function(e,t){return e/t},round:function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)},get_closest_image_size:function(e,t,n,a){var o=this,t=Math.round(t),n=Math.round(n),i={diff:null,size_name:null,height:null,width:null,crop:null},r=o.round(o.aspect_ratio(n,t),2);for(size in global_vars.image_sizes){var s=global_vars.image_sizes[size],d=parseInt(s.height),c=parseInt(s.width),l=o.round(o.aspect_ratio(c,d),2);if(r===l||s.crop!==!0&&1!==s.crop){var p=Math.abs(t-d);(p<i.diff||null===i.diff)&&(i.diff=p,i.size_name=size,i.height=d,i.width=c,i.crop=s.crop)}}null!==i.size_name&&jQuery.post(global_vars.ajax_url,{action:"wa_get_image_src",attachment_id:e,size:i.size_name},function(e){a(e)})}};return e.on("init",function(){var t=e.dom;e.on("wpLoadImageForm",function(t){if(!e.getParam("wpeditimage_disable_captions")){var n={type:"textbox",flex:1,name:"caption",minHeight:60,multiline:!0,scroll:!0,label:"Image caption"};t.data.splice(t.data.length-1,0,n)}}),e.on("wpNewImageRefresh",function(e){var n,a;(n=t.getParent(e.node,".wp-caption"))&&(n.style.width||(a=parseInt(e.node.clientWidth,10)+10,a=a?a+"px":"50%",t.setStyle(n,"width",a)))}),e.on("wpImageFormSubmit",function(n){var a,o,i,r,s,d=n.imgData.data,c=n.imgData.node,l=n.imgData.caption,u="",f="",w="";return d.id="__wp-temp-img-id",n.imgData.cancel=!0,d.style||(d.style=null),d.src?(l&&(l=l.replace(/\r\n|\r/g,"\n").replace(/<\/?[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")}),l=l.replace(/(<br[^>]*>)\s*\n\s*/g,"$1").replace(/\s*\n\s*/g,"<br />")),c?(s=c.id||null,t.setAttribs(c,d),a=t.getParent(c,".wp-caption"),l?a?(o=t.select(".wp-caption-dd",a)[0])&&(o.innerHTML=l):(c.className&&(u=c.className.match(/wp-image-([0-9]+)/),f=c.className.match(/align(left|right|center|none)/)),f?(f=f[0],c.className=c.className.replace(/align(left|right|center|none)/g,"")):f="alignnone",f=' class="wp-caption '+f+'"',u&&(u=' id="attachment_'+u[1]+'"'),w=d.width||c.clientWidth,w&&(w=parseInt(w,10),p||(w+=10),w=' style="width: '+w+'px"'),c.parentNode&&"A"===c.parentNode.nodeName?(r=t.getOuterHTML(c.parentNode),i=c.parentNode):(r=t.getOuterHTML(c),i=c),r="<"+g+" "+u+f+w+"><"+m+' class="wp-caption-dt">'+r+"</"+m+"><"+h+' class="wp-caption-dd wp-caption-text">'+l+"</"+h+"></"+g+">",(o=t.getParent(c,"p"))?(a=t.create("div",{"class":"mceTemp"},r),t.insertAfter(a,o),e.selection.select(a),e.nodeChanged(),t.remove(i),t.isEmpty(o)&&t.remove(o)):e.selection.setContent('<div class="mceTemp">'+r+"</div>")):a&&(r=t.getOuterHTML("A"===c.parentNode.nodeName?c.parentNode:c),o=t.create("p",{},r),t.insertAfter(o,a.parentNode),e.selection.select(o),e.nodeChanged(),t.remove(a.parentNode))):(r=t.createHTML("img",d),l?(i=e.selection.getNode(),d.width&&(w=parseInt(d.width,10),p||(w+=10),w=' style="width: '+w+'px"'),r="<"+g+' class="wp-caption alignnone"'+w+"><"+m+' class="wp-caption-dt">'+r+"</"+m+"><"+h+' class="wp-caption-dd wp-caption-text">'+l+"</"+h+"></"+g+">",o="P"===i.nodeName?i:t.getParent(i,"p"),o&&"P"===o.nodeName?(a=t.create("div",{"class":"mceTemp"},r),o.parentNode.insertBefore(a,o),e.selection.select(a),e.nodeChanged(),t.isEmpty(o)&&t.remove(o)):e.selection.setContent('<div class="mceTemp">'+r+"</div>")):e.selection.setContent(r)),c=t.get("__wp-temp-img-id"),t.setAttrib(c,"id",s),void(n.imgData.node=c)):void(c&&(t.remove((a=t.getParent(c,"div.mceTemp"))?a:"A"===c.parentNode.nodeName?c.parentNode:c),e.nodeChanged()))}),e.on("wpLoadImageData",function(n){var a,o=n.imgData.data,i=n.imgData.node;(a=t.getParent(i,".wp-caption"))&&(a=t.select(".wp-caption-dd",a)[0],a&&(o.caption=e.serializer.serialize(a).replace(/<br[^>]*>/g,"$&\n").replace(/^<p>/,"").replace(/<\/p>$/,"")))});var n=["image/jpeg","image/png","image/gif"];e.on("drop",function(t){if(!u&&Modernizr.filereader&&e.settings.fronted_options.media_upload===!0&&(t.preventDefault(),t.stopPropagation(),0!==t.dataTransfer.files.length)){wa_fronted.show_loading_spinner();var a=t.dataTransfer.files[0];if(-1!==jQuery.inArray(a.type,n)){var o=new FileReader;o.onload=function(t){jQuery.post(global_vars.ajax_url,{action:"wa_create_image",post_id:e.settings.fronted_options.post_id,file_data:encodeURIComponent(t.target.result),file_name:a.name,file_type:a.type,wa_fronted_save_nonce:global_vars.nonce},function(t){var n=t.attachment_obj,a=n.sizes.medium,o='<img src="'+a.url+'" width="'+a.width+'" height="'+a.height+'" alt="'+n.title+'" class="wp-image-'+n.id+' alignleft size-medium" style="height:'+a.height+"; width:"+a.width+';">';e.insertContent(o),wa_fronted.hide_loading_spinner()})},o.readAsDataURL(a)}else wa_fronted.show_loading_spinner()}}),t.bind(e.getDoc(),"dragend",function(e){u=!1}),t.bind(e.getDoc(),"dragstart",function(n){var a=e.selection.getNode();u=!0,"IMG"===a.nodeName&&(t.getParent(a,".wp-caption")||t.getParent(a,".gallery-icon"))&&n.preventDefault()}),l.Env.ie&&l.Env.ie>10&&(t.bind(e.getBody(),"mscontrolselect",function(n){"IMG"===n.target.nodeName&&t.getParent(n.target,".wp-caption")?e.getBody().focus():"DL"===n.target.nodeName&&t.hasClass(n.target,"wp-caption")&&n.target.focus()}),e.on("click",function(n){"IMG"===n.target.nodeName&&t.getAttrib(n.target,"data-wp-imgselect")&&t.getParent(n.target,".wp-caption")&&e.getBody().focus()}))}),e.on("ObjectResized",function(t){var n=t.target;if("IMG"===n.nodeName){var a=n.className.match(/wp-image-\d+/);if(null!==a){var o=a[0].match(/\d+/)[0];f.get_closest_image_size(o,n.height,n.width,function(e){e[3]===!0&&(n.className=n.className.replace(/size-\S+/,"size-"+e[4]),n.src=e[0])})}e.undoManager.transact(function(){var a,o,i=e.dom;n.className=n.className.replace(/\bsize-[^ ]+/,""),(a=i.getParent(n,".wp-caption"))&&(o=t.width||i.getAttrib(n,"width"),o&&(o=parseInt(o,10),p||(o+=10),i.setStyle(a,"width",o+"px")))})}}),e.on("BeforeExecCommand",function(t){var n,a,o,i,r=t.command,s=e.dom;if("mceInsertContent"===r)(n=s.getParent(e.selection.getNode(),"div.mceTemp"))?(a=s.create("p"),s.insertAfter(a,n),e.selection.setCursorLocation(a,0),e.nodeChanged()):-1!==t.value.indexOf("[gallery ")&&(t.preventDefault(),wa_fronted.show_loading_spinner(),wa_fronted.shortcode_to_html(t.value,!0,function(t){e.insertContent(t),e.hasOwnProperty("shortcode_edit")&&e.shortcode_edit.bind_shortcode_edit(e.targetElm),wa_fronted.hide_loading_spinner()}));else if("JustifyLeft"===r||"JustifyRight"===r||"JustifyCenter"===r||"alignnone"===r){if(n=e.selection.getNode(),i="align"+r.slice(7).toLowerCase(),o=e.dom.getParent(n,".wp-caption"),"IMG"!==n.nodeName&&!o)return;n=o||n,"alignleft"!==i&&e.dom.removeClass(n,"alignleft"),"aligncenter"!==i&&e.dom.removeClass(n,"aligncenter"),"alignright"!==i&&e.dom.removeClass(n,"alignright"),"alignnone"!==i&&e.dom.toggleClass(n,i),e.nodeChanged(),t.preventDefault()}}),e.on("keydown",function(t){var n,a,o,i,r=e.selection,d=t.keyCode,c=e.dom;if(d===l.util.VK.ENTER)n=r.getNode(),a=c.getParent(n,"div.mceTemp"),a&&(c.events.cancel(t),l.each(c.select(".wp-caption-dt, .wp-caption-dd",a),function(e){c.isEmpty(e)&&c.remove(e)}),i=l.Env.ie&&l.Env.ie<11?"":'<br data-mce-bogus="1" />',o=c.create("p",null,i),"DD"===n.nodeName?c.insertAfter(o,a):a.parentNode.insertBefore(o,a),e.nodeChanged(),r.setCursorLocation(o,0));else if((d===l.util.VK.DELETE||d===l.util.VK.BACKSPACE)&&(n=r.getNode(),"DIV"===n.nodeName&&c.hasClass(n,"mceTemp")?a=n:("IMG"===n.nodeName||"DT"===n.nodeName||"A"===n.nodeName)&&(a=c.getParent(n,"div.mceTemp")),a))return c.events.cancel(t),s(n),!1}),e.wpSetImgCaption=function(e){return t(e)},e.wpGetImgCaption=function(e){return n(e)},e.on("BeforeSetContent",function(t){"raw"!==t.format&&(t.content=e.wpSetImgCaption(t.content))}),e.on("PostProcess",function(t){t.get&&(t.content=e.wpGetImgCaption(t.content),t.content=t.content.replace(/ data-wp-imgselect="1"/g,""))}),e.addButton("remove",{tooltip:"Remove",icon:"dashicons-no",onclick:function(){s(e.selection.getNode())}}),e.addButton("edit",{tooltip:"Edit",icon:"dashicons-edit",onclick:function(){r(e.selection.getNode())}}),l.each({alignleft:"Align Left",aligncenter:"Align Center",alignright:"Align Right",alignnone:"Don’t Align"},function(t,n){var a=n.slice(5);e.addButton("img"+n,{tooltip:t,icon:"dashicons-align-"+a,cmd:"alignnone"===n?n:"Justify"+a.slice(0,1).toUpperCase()+a.slice(1),onPostRender:function(){var t=this;e.on("NodeChange",function(a){var o=e.dom.getParent(a.element,".wp-caption")||a.element;t.active("alignnone"===n?!e.dom.hasClass(o,"alignleft")&&!e.dom.hasClass(o,"aligncenter")&&!e.dom.hasClass(o,"alignright"):e.dom.hasClass(o,n))})}})}),e.addButton("wp_media",{tooltip:"Media",icon:"dashicons-admin-media",onclick:function(){wp.media.editor.open(e.id)}}),wa_fronted.add_action("shortcode_action_gallery",function(t,n){if(0!==n.parents("#"+e.id).length){var a=wp.media({frame:"post",state:"gallery-edit",title:wp.media.view.l10n.editGalleryTitle,editing:!0,multiple:!0,selection:c(t)});a.state("gallery-edit").on("update",function(){d(a,n)}),a.on("close",function(){e.focus(),a.detach()}),a.open()}}),{_do_shcode:t,_get_shcode:n}});
window.wp=window.wp||{},window.send_to_editor=window.send_to_editor||function(e){if(-1!==e.indexOf("[")){wa_fronted.show_loading_spinner();var t="undefined"!=typeof wa_fronted.is_editing_shortcode&&wa_fronted.is_editing_shortcode!==!1;wa_fronted.shortcode_to_html(e,t!==!0,function(n){""!==n?t?wa_fronted.replace_html(wa_fronted.is_editing_shortcode,n):tinymce.activeEditor.selection.setContent(n):tinymce.activeEditor.selection.setContent(e),tinymce.activeEditor.hasOwnProperty("shortcode_edit")&&tinymce.activeEditor.shortcode_edit.bind_shortcode_edit(tinymce.activeEditor.targetElm),wa_fronted.is_editing_shortcode=!1,wa_fronted.hide_loading_spinner()})}else tinymce.activeEditor.selection.setContent(e)},tinymce.ThemeManager.add("fronted",function(e){function t(e,t){for(;e;){if(e.nodeName===t)return e;e=e.parentNode}return!1}function n(n,o){var a,i=[];if(n)return c(n,function(n){function r(){var t=e.selection;"bullist"===c&&t.selectorChanged("ul > li",function(e,t){for(var o,a=t.parents.length;a--&&(o=t.parents[a].nodeName,"OL"!==o&&"UL"!==o););n.active(e&&"UL"===o)}),"numlist"===c&&t.selectorChanged("ol > li",function(e,t){for(var o,a=t.parents.length;a--&&(o=t.parents[a].nodeName,"OL"!==o&&"UL"!==o););n.active(e&&"OL"===o)}),n.settings.stateSelector&&t.selectorChanged(n.settings.stateSelector,function(e){n.active(e)},!0),n.settings.disabledStateSelector&&t.selectorChanged(n.settings.disabledStateSelector,function(e){n.disabled(e)})}var c;"|"===n?a=null:d.has(n)?(n={type:n},s.toolbar_items_size&&(n.size=s.toolbar_items_size),i.push(n),a=null):((!a||o)&&(a={type:"buttongroup",items:[]},i.push(a)),e.buttons[n]&&(c=n,n=e.buttons[c],"function"==typeof n&&(n=n()),n.icon&&-1!==n.icon.indexOf("dashicons")&&(n.icon="dashicon "+n.icon),o&&(n.text=n.tooltip,n.tooltip=!1),n.type=n.type||"button",s.toolbar_items_size&&(n.size=s.toolbar_items_size),"link"===c?n.onPostRender=function(){var n=this;e.on("NodeChange",function(e){n.active(t(e.element,"A"))})}:"unlink"===c&&(n.onPostRender=function(){var t=this;e.on("NodeChange",function(n){var o="A"!==n.element.nodeName&&-1===e.selection.getContent().indexOf("<a");t.disabled(o),l.setAttrib(t.getEl(),"tabindex",o?"0":"-1")})},n.onclick=function(){-1===e.selection.getContent().indexOf("<a")&&e.selection.select(e.selection.getNode()),e.execCommand("unlink")}),n=d.create(n),a.items.push(n),e.initialized?r():e.on("init",r)))}),i}function o(e){return d.create({type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:[{type:"toolbar",layout:"flow",items:n(e)}]})}var a,i=window.tinymce,r=this,s=e.settings,d=i.ui.Factory,c=i.each,l=i.DOM,p=32;c({H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",H5:"Heading 5",H6:"Heading 6",Pre:"Preformatted"},function(t,n){var o=n.toLowerCase();e.addButton(o,{tooltip:t,text:n,onclick:function(){e.formatter.toggle(o)},onPostRender:function(){var t=this;e.on("nodeChange",function(n){c(n.parents,function(n){t.active(!!e.formatter.matchNode(n,o))})})}})}),e.toolbarItems=n,r.renderUI=function(){function t(){return""===e.getContent({format:"raw"}).replace(/(?:<p[^>]*>)?(?:<br[^>]*>)?(?:<\/p>)?/,"")}var n,i,m={},g=0;return s.content_editable=!0,e.on("activate focus",function(){a=!0,l.addClass(e.getBody(),"mce-edit-focus")}),e.on("deactivate blur hide",function(){a=!1,l.removeClass(e.getBody(),"mce-edit-focus")}),e.on("remove",function(){n&&n.remove(),n=null}),s.placeholder&&(e.on("blur LoadContent deactivate",function(){t()&&(e.setContent(s.placeholder),i=!0,l.addClass(e.getBody(),"mce-placeholder"))}),e.on("focus activate",function(){i&&e.setContent("")}),e.on("SetContent",function(t){i&&!t.load&&(i=!1,l.removeClass(e.getBody(),"mce-placeholder"))}),e.on("PostProcess",function(e){i&&e.content&&(e.content="")}),e.on("BeforeAddUndo",function(e){i&&e.preventDefault()})),s.toolbar&&s.toolbar.length&&!n?("relative"===l.getStyle(document.body,"position",!0)&&(g=parseInt(l.getStyle(document.body,"margin-top",!0),10)+parseInt(l.getStyle(document.documentElement,"padding-top",!0),10)+parseInt(l.getStyle(document.documentElement,"margin-top",!0),10)),m.normal=o(s.toolbar),m.img=o(wa_fronted.apply_filters("image_edit_toolbar",["imgalignleft","imgaligncenter","imgalignright","imgalignnone","edit","remove"],s.fronted_options)),m.view=o(["editview","removeview"]),m.media=o(wa_fronted.apply_filters("image_upload_toolbar",["wp_media"],s.fronted_options)),n=r.panel=d.create({type:"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"stack",autohide:!0,items:[m.normal,m.img,m.view,m.media]}),n.reposition=function(t,n){var o,a,i,r,s,d=this.getEl(),f=n||e.selection.getRng(),u=f.getBoundingClientRect(),h=(u.left+u.right)/2,w=window.innerWidth,_=parseInt(l.getStyle(d,"margin-bottom",!0),10)+g;if(f.collapsed||0===h){var v=wa_fronted.getCaretPositionPx();u={top:v.y,bottom:v.y+d.offsetHeight/2,left:v.x,right:v.x},h=v.x}return d.className=(" "+d.className+" ").replace(/\smce-arrow-\S+\s/g," ").slice(1,-1),t=t||"normal",m[t]._visible||(c(m,function(e){e.hide()}),m[t].show()),o=d.offsetWidth,a=o/2,u.top<d.offsetHeight+p?(s=" mce-arrow-up",i=u.bottom+_):(s=" mce-arrow-down",i=u.top-d.offsetHeight-_),r=h-a,o>=w?(s+=" mce-arrow-full",r=0):0>r&&u.left+o>w||r+o>w&&u.right-o<0?r=(w-o)/2:0>r?(s+=" mce-arrow-left",r=u.left):r+o>w&&(s+=" mce-arrow-right",r=u.right-o),d.className+=s,l.setStyles(d,{left:r,top:i+window.pageYOffset}),this},n.on("show",function(){var e=this;setTimeout(function(){e._visible&&l.addClass(e.getEl(),"mce-inline-toolbar-active")},100)}),n.on("hide",function(){l.removeClass(this.getEl(),"mce-inline-toolbar-active")}),n.on("cancel",function(){e.focus()}),l.bind(window,"resize",function(){n.hide()}),e.on("selectionchange nodechange",function(t){var o=t.element||e.selection.getNode(),i=e.plugins.wpview.getView(),r=jQuery(o),d=r.hasClass("wa-shortcode-wrap")?r:r.parents(".wa-shortcode-wrap");0!==d.length&&(t.preventDefault(),e.selection.select(d[0]),e.selection.collapse(),n.hide()),e.selection.isCollapsed()&&!i&&n.hide(),setTimeout(function(){var t,r;a&&(!e.selection.isCollapsed()&&(t=e.selection.getContent())&&(t.replace(/<[^>]+>/g,"").trim()||0===t.indexOf("<"))&&"HR"!==o.nodeName||i?(r=i?"view":"IMG"===o.nodeName?"img":"normal",n.show().reposition(r,i)):e.selection.isCollapsed()&&"IMG"!==o.nodeName&&!i&&s.fronted_options.media_upload?n.show().reposition("media",i):n.hide())},100)}),e.shortcuts.add("Alt+F10","",function(){var e=n.find("toolbar")[0];e&&e.focus(!0)}),n.renderTo(document.body).reflow().hide(),c(m,function(e){e.hide()}),{}):{}}});
window.Modernizr=function(e,t,n){function o(e){_.cssText=e}function i(e,t){return o(y.join(e+";")+(t||""))}function a(e,t){return typeof e===t}function r(e,t){return!!~(""+e).indexOf(t)}function s(e,t){for(var o in e){var i=e[o];if(!r(i,"-")&&_[i]!==n)return"pfx"==t?i:!0}return!1}function c(e,t,o){for(var i in e){var r=t[e[i]];if(r!==n)return o===!1?e[i]:a(r,"function")?r.bind(o||t):r}return!1}function d(e,t,n){var o=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+C.join(o+" ")+o).split(" ");return a(t,"string")||a(t,"undefined")?s(i,t):(i=(e+" "+N.join(o+" ")+o).split(" "),c(i,t,n))}var l,p,u,m="2.8.3",f={},g=!0,h=t.documentElement,w="modernizr",v=t.createElement(w),_=v.style,y=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),b="Webkit Moz O ms",C=b.split(" "),N=b.toLowerCase().split(" "),E={},x=[],S=x.slice,P=function(e,n,o,i){var a,r,s,c,d=t.createElement("div"),l=t.body,p=l||t.createElement("body");if(parseInt(o,10))for(;o--;)s=t.createElement("div"),s.id=i?i[o]:w+(o+1),d.appendChild(s);return a=["&#173;",'<style id="s',w,'">',e,"</style>"].join(""),d.id=w,(l?d:p).innerHTML+=a,p.appendChild(d),l||(p.style.background="",p.style.overflow="hidden",c=h.style.overflow,h.style.overflow="hidden",h.appendChild(p)),r=n(d,e),l?d.parentNode.removeChild(d):(p.parentNode.removeChild(p),h.style.overflow=c),!!r},z=function(){function e(e,i){i=i||t.createElement(o[e]||"div"),e="on"+e;var r=e in i;return r||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(e,""),r=a(i[e],"function"),a(i[e],"undefined")||(i[e]=n),i.removeAttribute(e))),i=null,r}var o={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),A={}.hasOwnProperty;u=a(A,"undefined")||a(A.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(e,t){return A.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=S.call(arguments,1),o=function(){if(this instanceof o){var i=function(){};i.prototype=t.prototype;var a=new i,r=t.apply(a,n.concat(S.call(arguments)));return Object(r)===r?r:a}return t.apply(e,n.concat(S.call(arguments)))};return o}),E.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},E.opacity=function(){return i("opacity:.55"),/^0.55$/.test(_.opacity)},E.cssanimations=function(){return d("animationName")},E.csstransforms=function(){return!!d("transform")},E.csstransforms3d=function(){var e=!!d("perspective");return e&&"webkitPerspective"in h.style&&P("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=9===t.offsetLeft&&3===t.offsetHeight}),e},E.csstransitions=function(){return d("transition")};for(var T in E)u(E,T)&&(p=T.toLowerCase(),f[p]=E[T](),x.push((f[p]?"":"no-")+p));return f.addTest=function(e,t){if("object"==typeof e)for(var o in e)u(e,o)&&f.addTest(o,e[o]);else{if(e=e.toLowerCase(),f[e]!==n)return f;t="function"==typeof t?t():t,"undefined"!=typeof g&&g&&(h.className+=" "+(t?"":"no-")+e),f[e]=t}return f},o(""),v=l=null,function(e,t){function n(e,t){var n=e.createElement("p"),o=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",o.insertBefore(n.lastChild,o.firstChild)}function o(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function i(e){var t=w[e[g]];return t||(t={},h++,e[g]=h,w[h]=t),t}function a(e,n,o){if(n||(n=t),l)return n.createElement(e);o||(o=i(n));var a;return a=o.cache[e]?o.cache[e].cloneNode():f.test(e)?(o.cache[e]=o.createElem(e)).cloneNode():o.createElem(e),!a.canHaveChildren||m.test(e)||a.tagUrn?a:o.frag.appendChild(a)}function r(e,n){if(e||(e=t),l)return e.createDocumentFragment();n=n||i(e);for(var a=n.frag.cloneNode(),r=0,s=o(),c=s.length;c>r;r++)a.createElement(s[r]);return a}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return v.shivMethods?a(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+o().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,t.frag)}function c(e){e||(e=t);var o=i(e);return v.shivCSS&&!d&&!o.hasCSS&&(o.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),l||s(e,o),e}var d,l,p="3.7.0",u=e.html5||{},m=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",h=0,w={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",d="hidden"in e,l=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){d=!0,l=!0}}();var v={elements:u.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:p,shivCSS:u.shivCSS!==!1,supportsUnknownElements:l,shivMethods:u.shivMethods!==!1,type:"default",shivDocument:c,createElement:a,createDocumentFragment:r};e.html5=v,c(t)}(this,t),f._version=m,f._prefixes=y,f._domPrefixes=N,f._cssomPrefixes=C,f.hasEvent=z,f.testProp=function(e){return s([e])},f.testAllProps=d,f.testStyles=P,h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(g?" js "+x.join(" "):""),f}(this,this.document),function(e,t,n){function o(e){return"[object Function]"==h.call(e)}function i(e){return"string"==typeof e}function a(){}function r(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=w.shift();v=1,e?e.t?f(function(){("c"==e.t?u.injectCss:u.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):v=0}function c(e,n,o,i,a,c,d){function l(t){if(!m&&r(p.readyState)&&(_.r=m=1,!v&&s(),p.onload=p.onreadystatechange=null,t)){"img"!=e&&f(function(){b.removeChild(p)},50);for(var o in S[n])S[n].hasOwnProperty(o)&&S[n][o].onload()}}var d=d||u.errorTimeout,p=t.createElement(e),m=0,h=0,_={t:o,s:n,e:a,a:c,x:d};1===S[n]&&(h=1,S[n]=[]),"object"==e?p.data=n:(p.src=n,p.type=e),p.width=p.height="0",p.onerror=p.onload=p.onreadystatechange=function(){l.call(this,h)},w.splice(i,0,_),"img"!=e&&(h||2===S[n]?(b.insertBefore(p,y?null:g),f(l,d)):S[n].push(p))}function d(e,t,n,o,a){return v=0,t=t||"j",i(e)?c("c"==t?N:C,e,t,this.i++,n,o,a):(w.splice(this.i++,0,e),1==w.length&&s()),this}function l(){var e=u;return e.loader={load:d,i:0},e}var p,u,m=t.documentElement,f=e.setTimeout,g=t.getElementsByTagName("script")[0],h={}.toString,w=[],v=0,_="MozAppearance"in m.style,y=_&&!!t.createRange().compareNode,b=y?m:g.parentNode,m=e.opera&&"[object Opera]"==h.call(e.opera),m=!!t.attachEvent&&!m,C=_?"object":m?"script":"img",N=m?"script":C,E=Array.isArray||function(e){return"[object Array]"==h.call(e)},x=[],S={},P={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};u=function(e){function t(e){var t,n,o,e=e.split("!"),i=x.length,a=e.pop(),r=e.length,a={url:a,origUrl:a,prefixes:e};for(n=0;r>n;n++)o=e[n].split("="),(t=P[o.shift()])&&(a=t(a,o));for(n=0;i>n;n++)a=x[n](a);return a}function r(e,i,a,r,s){var c=t(e),d=c.autoCallback;c.url.split(".").pop().split("?").shift(),c.bypass||(i&&(i=o(i)?i:i[e]||i[r]||i[e.split("/").pop().split("?")[0]]),c.instead?c.instead(e,i,a,r,s):(S[c.url]?c.noexec=!0:S[c.url]=1,a.load(c.url,c.forceCSS||!c.forceJS&&"css"==c.url.split(".").pop().split("?").shift()?"c":n,c.noexec,c.attrs,c.timeout),(o(i)||o(d))&&a.load(function(){l(),i&&i(c.origUrl,s,r),d&&d(c.origUrl,s,r),S[c.url]=2})))}function s(e,t){function n(e,n){if(e){if(i(e))n||(p=function(){var e=[].slice.call(arguments);u.apply(this,e),m()}),r(e,p,t,0,d);else if(Object(e)===e)for(c in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(c)&&(!n&&!--s&&(o(p)?p=function(){var e=[].slice.call(arguments);u.apply(this,e),m()}:p[c]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),m()}}(u[c])),r(e[c],p,t,c,d))}else!n&&m()}var s,c,d=!!e.test,l=e.load||e.both,p=e.callback||a,u=p,m=e.complete||a;n(d?e.yep:e.nope,!!l),l&&n(l)}var c,d,p=this.yepnope.loader;if(i(e))r(e,0,p,0);else if(E(e))for(c=0;c<e.length;c++)d=e[c],i(d)?r(d,0,p,0):E(d)?u(d):Object(d)===d&&s(d,p);else Object(e)===e&&s(e,p)},u.addPrefix=function(e,t){P[e]=t},u.addFilter=function(e){x.push(e)},u.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",p=function(){t.removeEventListener("DOMContentLoaded",p,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,o,i,c,d){var l,p,m=t.createElement("script"),i=i||u.errorTimeout;m.src=e;for(p in o)m.setAttribute(p,o[p]);n=d?s:n||a,m.onreadystatechange=m.onload=function(){!l&&r(m.readyState)&&(l=1,n(),m.onload=m.onreadystatechange=null)},f(function(){l||(l=1,n(1))},i),c?m.onload():g.parentNode.insertBefore(m,g)},e.yepnope.injectCss=function(e,n,o,i,r,c){var d,i=t.createElement("link"),n=c?s:n||a;i.href=e,i.rel="stylesheet",i.type="text/css";for(d in o)i.setAttribute(d,o[d]);r||(g.parentNode.insertBefore(i,g),f(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("contenteditable","contentEditable"in document.documentElement),Modernizr.addTest("filereader",function(){return!!(window.File&&window.FileList&&window.FileReader)});
var fronted_featured_img=function(e,t){this.options=t,this.editor=e,this.has_thumbnail=!1,this.frame=!1,this.replace_this=!1,this.init()};!function(e){window.wp=window.wp||{},fronted_featured_img.prototype.init=function(){var e=this;0!==e.editor.find("img.attachment-post-thumbnail").length?(e.has_thumbnail=!0,e.replace_this=e.editor.find("img.attachment-post-thumbnail")):e.show_placeholder(),e.frame=window.wp.media({frame:"post",state:"featured-image",states:[new window.wp.media.controller.FeaturedImage,new window.wp.media.controller.EditImage]}),e.frame.state("featured-image").on("select",function(){e.frame.state().get("selection").single();"undefined"!=typeof e.replace_this&&e.replace_this!==!1?e.insert_image(e.frame,e.replace_this):e.insert_image(e.frame)}),e.create_toolbar()},fronted_featured_img.prototype.create_toolbar=function(){var e=this;featured_image_toolbar=document.createElement("div"),featured_image_toolbar.className="fronted-featured-image-toolbar",featured_image_toolbar.buttons=[{id:"add-image",icon:"dashicons dashicons-format-image",title:wa_fronted.i18n("Add image"),on_empty:!0,func:function(t){e.edit()}},{id:"edit-image",icon:"dashicons dashicons-edit",title:wa_fronted.i18n("Edit image"),on_empty:!1,func:function(t){wa_fronted.show_loading_spinner(),jQuery.post(global_vars.ajax_url,{action:"wa_get_thumbnail_id",post_id:e.options.post_id},function(t){""!==t.attachment_id&&t.attachment_id!==!1&&(window.wp.media.view.settings.post.featuredImageId=parseInt(t.attachment_id),e.edit(parseInt(t.attachment_id))),wa_fronted.hide_loading_spinner()})}},{id:"remove-image",icon:"dashicons dashicons-no",title:wa_fronted.i18n("Remove image"),on_empty:!1,func:function(t){wa_fronted.show_loading_spinner(),jQuery.post(global_vars.ajax_url,{action:"wa_delete_post_thumbnail",post_id:e.options.post_id},function(t){e.editor.find("img.attachment-post-thumbnail").remove(),e.has_thumbnail=!1,e.show_placeholder(),wa_fronted.hide_loading_spinner()})}}],featured_image_toolbar.buttons=wa_fronted.apply_filters("featured_image_toolbar",featured_image_toolbar.buttons,e.options);for(var t=0;t<featured_image_toolbar.buttons.length;t++){var n=featured_image_toolbar.buttons[t],o=document.createElement("button"),i=document.createElement("i");o.className="fronted-featured-image-"+n.id,i.className=n.icon,i.title=n.title,o.appendChild(i),featured_image_toolbar.appendChild(o),o.addEventListener("click",n.func)}document.body.appendChild(featured_image_toolbar),e.featured_image_toolbar=jQuery(featured_image_toolbar),e.editor.on("mouseenter click",function(t){e.show_toolbar(t,e)}),e.editor.on("mouseleave",function(t){e.hide_toolbar(t,e)}),e.featured_image_toolbar.on("mouseleave",function(t){e.hide_toolbar(t,e)})},fronted_featured_img.prototype.show_toolbar=function(e,t){e.preventDefault();var t=this;if(0!==t.featured_image_toolbar[0].buttons.length)for(var n=0;n<t.featured_image_toolbar[0].buttons.length;n++){var o=t.featured_image_toolbar[0].buttons[n],i=t.featured_image_toolbar.find(".fronted-featured-image-"+o.id);t.has_thumbnail?o.on_empty?i.removeClass("show"):i.addClass("show"):o.on_empty?i.addClass("show"):i.removeClass("show")}var a=t.editor.find("img.attachment-post-thumbnail");a=0===a.length?t.editor.find(".featured-post-placeholder"):a;var r=a.offset();t.featured_image_toolbar.css({width:a.width(),height:a.height(),top:r.top,left:r.left}).addClass("show")},fronted_featured_img.prototype.hide_toolbar=function(e,t){e.preventDefault();var t=this;null!==e.toElement&&-1===e.toElement.className.indexOf("fronted-featured-image-")&&t.featured_image_toolbar.removeClass("show")},fronted_featured_img.prototype.show_placeholder=function(){var e=this;0===e.editor.find(".featured-post-placeholder").length?e.editor.append('<div class="featured-post-placeholder"><i class="dashicons dashicons-format-image"></i></div>'):e.editor.find(".featured-post-placeholder").show(),e.replace_this=e.editor.find(".featured-post-placeholder")},fronted_featured_img.prototype.edit=function(e){var t=this.frame;e=e||!1,t.once("open",function(){var n=t.state().get("selection");e!==!1?(attachment=window.wp.media.attachment(e),attachment.fetch(),n.add(attachment)):n.reset()}),t.open()},fronted_featured_img.prototype.insert_image=function(e,t){var n=this,o=e.state(),i=o.get("selection"),t=t||!1;i&&i.each(function(e){var i,a,r=o.display(e).toJSON(),s=e.toJSON(),d=s.caption;window.wp.media.view.settings.captions||delete s.caption,r=window.wp.media.string.props(r,s),i={id:s.id,post_content:s.description,post_excerpt:d},"featured-image"!==o.id?(r.linkUrl&&(i.url=r.linkUrl),"image"===s.type?(r.url=r.src,a=window.wp.media.string.image(r),_.each({align:"align",size:"image-size",alt:"image_alt"},function(e,t){r[t]&&(i[e]=r[t])})):"video"===s.type?a=window.wp.media.string.video(r,s):"audio"===s.type?a=window.wp.media.string.audio(r,s):(a=window.wp.media.string.link(r),i.post_title=r.title),e.attributes.nonce=window.wp.media.view.settings.nonce.sendToEditor,e.attributes.attachment=i,e.attributes.html=a,e.attributes.post_id=window.wp.media.view.settings.post.id,t!==!1?window.wp.media.view.settings.captions&&d?wa_fronted.shortcode_to_html(e.attributes.html,!0,function(e){wa_fronted.replace_html(t,e),n.replace_this=!1,n.enable_resizing(n.instance,jQuery(n.instance.elements))}):(wa_fronted.replace_html(t,e.attributes.html),n.replace_this=!1):window.wp.media.view.settings.captions&&d?wa_fronted.shortcode_to_html(e.attributes.html,!0,function(e){wa_fronted.insertHtmlAtCaret(e),n.enable_resizing(n.instance,jQuery(n.instance.elements))}):wa_fronted.insertHtmlAtCaret(e.attributes.html)):(wa_fronted.show_loading_spinner(),jQuery.post(global_vars.ajax_url,{action:"wa_set_thumbnail",attachment_id:i.id,image_size:n.options.image_size,post_id:n.options.post_id},function(e){e.hasOwnProperty("html")&&t!==!1&&(wa_fronted.replace_html(t,e.html),n.replace_this=n.editor.find("img.attachment-post-thumbnail"),n.has_thumbnail=!0),wa_fronted.hide_loading_spinner()}))})}}(jQuery);
var EventManager=function(){function e(e,t,n,o){return"string"==typeof e&&"function"==typeof t&&(n=parseInt(n||10,10),s("actions",e,t,n,o)),c}function t(){var e=Array.prototype.slice.call(arguments),t=e.shift();return"string"==typeof t&&l("actions",t,e),c}function n(e,t){return"string"==typeof e&&r("actions",e,t),c}function o(e,t,n,o){return"string"==typeof e&&"function"==typeof t&&(n=parseInt(n||10,10),s("filters",e,t,n,o)),c}function i(){var e=Array.prototype.slice.call(arguments),t=e.shift();return"string"==typeof t?l("filters",t,e):c}function a(e,t){return"string"==typeof e&&r("filters",e,t),c}function r(e,t,n,o){if(p[e][t])if(n){var i,a=p[e][t];if(o)for(i=a.length;i--;){var r=a[i];r.callback===n&&r.context===o&&a.splice(i,1)}else for(i=a.length;i--;)a[i].callback===n&&a.splice(i,1)}else p[e][t]=[]}function s(e,t,n,o,i){var a={callback:n,priority:o,context:i},r=p[e][t];r?(r.push(a),r=d(r)):r=[a],p[e][t]=r}function d(e){for(var t,n,o,i=1,a=e.length;a>i;i++){for(t=e[i],n=i;(o=e[n-1])&&o.priority>t.priority;)e[n]=e[n-1],--n;e[n]=t}return e}function l(e,t,n){var o=p[e][t];if(!o)return"filters"===e?n[0]:!1;var i=0,a=o.length;if("filters"===e)for(;a>i;i++)n[0]=o[i].callback.apply(o[i].context,n);else for(;a>i;i++)o[i].callback.apply(o[i].context,n);return"filters"===e?n[0]:!0}var c={removeFilter:a,applyFilters:i,addFilter:o,removeAction:n,doAction:t,addAction:e},p={actions:{},filters:{}};return c};
function escape_regexp(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}window.wa_fronted={};var wa_fronted=window.wa_fronted;!function(e){window.wp=window.wp||{};var t=window.tinymce;e.fn.getCursorPosition=function(){var t=e(this).get(0),n=0;if("selectionStart"in t)n=t.selectionStart;else if("selection"in document){t.focus();var o=document.selection.createRange(),a=document.selection.createRange().text.length;o.moveStart("character",-t.value.length),n=o.text.length-a}return n},wa_fronted={options:e.parseJSON(global_vars.options),data:{editable_areas:[],timers:{},current_selection:!1,current_range:!1,current_editor_options:!1,has_changes:!1,has_errors:!1,is_saving:!1},add_action:function(){var e=arguments[0].split(" ");for(k in e)arguments[0]="wa_fronted."+e[k],wp.hooks.addAction.apply(this,arguments);return this},remove_action:function(){return arguments[0]="wa_fronted."+arguments[0],wp.hooks.removeAction.apply(this,arguments),this},do_action:function(){return arguments[0]="wa_fronted."+arguments[0],wp.hooks.doAction.apply(this,arguments),this},add_filter:function(){return arguments[0]="wa_fronted."+arguments[0],wp.hooks.addFilter.apply(this,arguments),this},remove_filter:function(){return arguments[0]="wa_fronted."+arguments[0],wp.hooks.removeFilter.apply(this,arguments),this},apply_filters:function(){return arguments[0]="wa_fronted."+arguments[0],wp.hooks.applyFilters.apply(this,arguments)},initialize:function(){var t=this;if("undefined"!=typeof t.options.editable_areas&&0!==t.options.editable_areas.length)if(global_vars.post_lock===!1||""===global_vars.post_lock){e.post(global_vars.ajax_url,{action:"wa_fronted_set_post_lock",post_id:global_vars.post_id},function(e){wp.heartbeat.enqueue("wa_fronted_post_lock",{post_id:global_vars.post_id},!1)}),rangy.init();for(var n=function(n,a){a=e(a),a.addClass("wa-fronted-editor"),t.setup_editor(a,t.options.editable_areas[o],t.options),t.data.editable_areas.push({editor:a,options:t.options.editable_areas[o]})},o=0;o<t.options.editable_areas.length;o++){var a=e(t.options.editable_areas[o].container);0!==a.length&&e.each(a,n)}toastr.options.timeOut="7000",toastr.options.positionClass="toast-bottom-right",toastr.options.closeButton=!0;var i=e("#wa-fronted-revisions").attr("data-post-id");i&&t.check_autosave(i),t.do_action("on_init"),t.bind()}else t.show_post_lock_notice(global_vars.post_lock,global_vars.global_post_id)},bind:function(){var t=this;e("#wa-fronted-save").click(function(){t.save()}),e("#wa-fronted-settings").click(function(){e("#wa-fronted-revisions-modal").fadeOut("fast"),e("#wa-fronted-settings-modal").fadeIn("fast"),e("html, body").addClass("wa-modal-open")}),e("#wa-fronted-revisions").click(function(){e("#wa-fronted-settings-modal").fadeOut("fast"),e("html, body").removeClass("wa-modal-open");var n=e(this).attr("data-post-id");t.show_revision_modal(n)}),e(".close-wa-fronted-modal").click(function(){e("#wa-fronted-settings-modal, #wa-fronted-revisions-modal").fadeOut("fast"),e("html, body").removeClass("wa-modal-open")});var n=e(".wa_fronted_datepicker");n.each(function(t,n){var o=e(n),a={dateFormat:"yy-mm-dd",beforeShow:function(e,t){t.dpDiv.addClass("wa-fronted-datepicker")}};"false"!==o.attr("data-time")?a.timeFormat="HH:mm:ss":a.showTimepicker=!1,o.datetimepicker(a),o.datetimepicker("setDate",o.val())}),e("#wa-fronted-settings-modal select").select2({minimumResultsForSearch:10,dropdownCssClass:"wa-fronted-select2",formatNoMatches:function(n){var o=t.i18n("No results found.");if(""!==n){var a=e(this);taxonomy=a.attr("data-tax"),is_hierarchical=a.attr("data-hierarchical"),o+=' <a class="wa-add-tax-btn" href="javascript:void(0)" onclick="wa_fronted.add_tax_term(\''+n+"', '"+taxonomy+"', "+is_hierarchical+')"><i class="dashicons dashicons-plus"></i> '+t.i18n("Add")+"</a>"}return o}}),t.do_action("on_bind"),e(document).on("heartbeat-tick.wa_fronted_post_lock",function(e,n){n.hasOwnProperty("wa_fronted_post_lock")&&(n.wa_fronted_post_lock.is_locked!==!1&&""!==n.wa_fronted_post_lock.is_locked?t.show_post_lock_notice(n.wa_fronted_post_lock.is_locked,global_vars.global_post_id):wp.heartbeat.enqueue("wa_fronted_post_lock",{post_id:n.wa_fronted_post_lock.post_id},!1))}),window.onbeforeunload=function(){return t.data.has_changes&&!t.data.is_saving?t.i18n("The changes you have made will be lost if you navigate away from this page."):void 0}},setup_editor:function(n,o,a){var i=this,r={selector:o.container,theme:"fronted",toolbar:["bold","italic","strikethrough","bullist","numlist","blockquote","alignleft","aligncenter","alignright","link","unlink","h2","h3"],plugins:["hr","lists","media","paste","wordpress","wplink","wpdialogs","wpview"],inline:!0,relative_urls:!1,convert_urls:!1,paste_as_text:!0,browser_spellcheck:!0,directionality:o.direction,wpeditimage_html5_captions:!0,fronted_options:o,wpautop:!1,setup:function(t){o.paragraphs!==!0&&(t.on("keydown",function(e){return 13===e.which?(e.preventDefault(),e.stopPropagation(),!1):!0}),t.on("blur",function(e){t.setContent(t.getContent({format:"text"}))})),t.on("paste",function(n){var o=n.clipboardData.getData("text/plain");!o||-1===o.indexOf("http://")&&-1===o.indexOf("https://")||(n.preventDefault(),i.show_loading_spinner(),e.post(global_vars.ajax_url,{action:"wa_get_oembed",link:o},function(e){t.insertContent(e.oembed!==!1?e.oembed:'<a href="'+o+'">'+o+"</a>"),i.hide_loading_spinner()}))}),t.on("change",function(e){clearTimeout(i.data.timers[t.id]),i.data.timers[t.id]=setTimeout(function(){i.data.has_changes=!0,i.validate(n,o),i.autosave(n,o),i.show_save_button()},1e3)}),t.on("click",function(e){if("A"===e.target.nodeName&&e.ctrlKey){var t=window.open(e.target.href,"_blank");t.focus()}}),t.on("focus",function(e){window.wpActiveEditor=t.id}),i.do_action("on_tinymce_setup",t,o,a)}};if(void 0===o.toolbar&&(o.toolbar="full"),"false"===o.toolbar||o.toolbar===!1?r.toolbar=!1:"full"!==o.toolbar&&(r.toolbar=o.toolbar.replace(/\s+/g,"").split(",")),"false"!==o.toolbar&&o.toolbar!==!1&&(r.toolbar=i.apply_filters("toolbar_buttons",r.toolbar,o)),n.click(function(){var t=window.getSelection();t&&(i.data.current_selection=e.extend({},t),t.rangeCount&&(i.data.current_range=t.getRangeAt(0)))}),"only"!==o.media_upload&&o["native"]){if("meta_select"!==o.field_type)o.media_upload===!0&&r.plugins.push("fronted_image"),o.shortcodes===!0&&r.plugins.push("fronted_shortcode"),r.plugins=i.apply_filters("editor_plugins",r.plugins,o),t.init(r);else if(o.hasOwnProperty("values")&&o.values.length>1&&o.hasOwnProperty("meta_key")&&o["native"]){var s=document.createElement("select");s.id="select_"+o.meta_key,s.name="select_"+o.meta_key,s.className="wa_fronted_select";for(var d=0;d<o.values.length;d++){var l=o.values[d],c=document.createElement("option");c.value=l.value,c.innerHTML=l.label,l.hasOwnProperty("selected")&&l.selected&&(c.selected=!0,n.attr("data-db-value",l.value)),s.appendChild(c)}document.body.appendChild(s);var s=e(s);s.select2({minimumResultsForSearch:10}),s.on("change",function(e){var t=s.val();i.specific_output_to(n,o,t,t)||(n.html(t),n.attr("data-db-value",t))});var p=n.width(),u=n.position(),f=s.data("select2").container,m=s.data("select2").dropdown;f.css({left:u.left+(p/2-f.width()/2)+"px"}).addClass("wa-fronted-selectmenu");var h,g=function(){h=setTimeout(function(){f.removeClass("show"),s.select2("close")},500)};n.hover(function(){clearTimeout(h);var e=n.position();f.css({top:e.top+"px"}).addClass("show")},g),f.hover(function(){clearTimeout(h)},g),m.hover(function(){clearTimeout(h)},g)}}else"only"===o.media_upload&&o["native"]?new fronted_featured_img(n,o):i.do_action("on_setup_editor",n,o,a)},autosave:function(n,o){var a=this;0!==global_vars.post_revisions&&(clearTimeout(a.data.timers.autosave),a.data.timers.autosave=setTimeout(function(){if(!a.data.is_saving){for(var n=a.data.editable_areas,o=[],i=0;i<n.length;i++)if("post_thumbnail"!==n[i].options.field_type){var r=n[i].editor.attr("data-db-value"),s="";s="undefined"!=typeof r&&r!==!1?r:t.editors[n[i].editor[0].id].getContent(),o.push({content:s,options:n[i].options,extra:a.apply_filters("autosave_extra_data","",s,n[i].options)})}e.post(global_vars.ajax_url,{action:"wa_fronted_autosave",data:o,wa_fronted_save_nonce:global_vars.nonce},function(e){e.success&&toastr.info(a.i18n("A draft of this post has been saved automatically"),a.i18n("Draft autosaved"))})}},1e4))},save:function(){var n=this,o=n.data.editable_areas,a=[];if(n.show_loading_spinner(),n.data.has_errors){for(var i=0;i<o.length;i++)o[i].options.hasOwnProperty("has_errors")&&o[i].options.has_errors&&(o[i].editor.tipso("destroy"),o[i].editor.tipso({content:n.validation_msg(o[i].options.validation.type,o[i].options.validation.compare),useTitle:!1,background:"#bd362f"}),o[i].editor.tipso("show"));n.hide_loading_spinner(),toastr.error(n.i18n("There were validation errors!"),n.i18n("Save unsuccessful"))}else{n.data.is_saving=!0;for(var i=0;i<o.length;i++)if("post_thumbnail"!==o[i].options.field_type){var r=o[i].editor.attr("data-db-value"),s="";s="undefined"!=typeof r&&r!==!1?r:t.editors[o[i].editor[0].id].getContent(),a.push({content:s,options:o[i].options,extra:n.apply_filters("save_extra_data","",s,o[i].options)})}e.post(global_vars.ajax_url,{action:"wa_fronted_save",data:a,wa_fronted_save_nonce:global_vars.nonce},function(e){e.success?toastr.success(n.i18n("Contents have been saved successfully"),n.i18n("Save successful")):"undefined"!=typeof e.error&&toastr.error(e.error,n.i18n("Save unsuccessful")),n.data.is_saving=!1,n.hide_loading_spinner()})}},show_save_button:function(){e("#wa-fronted-save").fadeIn("fast")},show_loading_spinner:function(){e("#wa-fronted-spinner").fadeIn("fast")},hide_loading_spinner:function(){e("#wa-fronted-spinner").fadeOut("fast")},shortcode_from_attr:function(e){return decodeURIComponent(e.attr("data-shortcode"))},shortcode_to_html:function(t,n,o){e.post(global_vars.ajax_url,{action:"wa_render_shortcode",shortcode:t,comments:n},function(e){o(e)})},getCaretPositionPx:function(){var e=0,t=0,n=window.getSelection();if(n.rangeCount){var o=n.getRangeAt(0);if(o.getClientRects){var a=o.getClientRects();a.length>0&&(e=a[0].left,t=a[0].top)}if(0==e&&0==t){var i=window.document.createElement("span");if(i.getClientRects){i.appendChild(window.document.createTextNode("​")),o.insertNode(i),rect=i.getClientRects()[0],e=rect.left,t=rect.top;var r=i.parentNode;r.removeChild(i),r.normalize()}}}return{x:e,y:t}},getSelectionText:function(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e},specific_output_to:function(e,t,n,o){if(!t.hasOwnProperty("output_to"))return!1;if(t.output_to.hasOwnProperty("selector")){var a=e.find(t.output_to.selector);if(0===a.length)return!1;t.output_to.hasOwnProperty("attr")?a.attr(t.output_to.attr,o):a.html(o)}else if(Array.isArray(t.output_to))for(var i=0;i<t.output_to.length;i++){var r=t.output_to[i];if(r.hasOwnProperty("selector")){var a=e.find(r.selector);if(0===a.length)return!1;r.hasOwnProperty("attr")?a.attr(r.attr,o):a.html(o)}}else{var a=e;t.output_to.hasOwnProperty("attr")?a.attr(t.output_to.attr,o):a.html(o)}return e.attr("data-db-value",n),!0},insertHtmlAtCaret:function(e,t,n){var o=this;if(t=t||!1,n=n||!1,window.getSelection){t===!1&&n===!1&&("undefined"==typeof o.data.current_selection||o.data.current_selection===!1?(t=window.getSelection(),n=t.getRangeAt(0)):(t=o.data.current_selection,n=o.data.current_range)),"undefined"!=typeof n&&n!==!1&&n.deleteContents();var a=document.createElement("div");a.innerHTML=e;for(var i,r,s=document.createDocumentFragment();i=a.firstChild;)r=s.appendChild(i);n.insertNode(s),o.current_selection=!1}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)},replace_html:function(t,n){el=e(t),el.replaceWith(n)},validate:function(e,t){var n=this;t.validation!==!1&&(n.validator(e.text(),t.validation.type,t.validation.compare)?(e.tipso("hide"),e.tipso("destroy")):(n.data.has_errors=!0,t.has_errors=!0,e.tipso({content:n.validation_msg(t.validation.type,t.validation.compare),useTitle:!1,background:"#23282d"}),e.tipso("show")))},add_tax_term:function(t,n,o){var a=this,i={action:"wa_add_tax_term",term:t,taxonomy:n};a.show_loading_spinner(),e.post(global_vars.ajax_url,i,function(o){e('<option value="'+o.term_id+'" selected>'+t+"</option>").appendTo("#wa_fronted_tax_"+n),e("#wa_fronted_tax_"+n).trigger("change"),a.hide_loading_spinner()})},get_revisions:function(t,n){var o=this;o.show_loading_spinner(),e.post(global_vars.ajax_url,{action:"wa_get_revisions",post_id:t},function(e){o.hide_loading_spinner(),n(e)})},switch_to_revision:function(e){for(var n=this,o=n.data.editable_areas,a=0;a<o.length;a++){var i=!1,r=!1;e.hasOwnProperty(o[a].options.field_type)&&(i=e[o[a].options.field_type]);var s=n.apply_filters("revision_db_value",i,o[a],e);if(r=n.apply_filters("revision_content",i,o[a],e),r!==!1){n.specific_output_to(o[a].editor,o[a].options,s,r)||o[a].editor.html(r);var d=t.get(o[a].editor.attr("id"));null!==d&&d.hasOwnProperty("shortcode_edit")&&d.shortcode_edit.bind_shortcode_edit(o[a].editor),n.validate(o[a].editor,o[a].options)}}n.data.has_changes=!0,n.show_save_button()},show_revision_modal:function(t,n){var o=this;n=n||!1,o.get_revisions(t,function(t){if(0!==t.length){var a=t.length-1;revision_input=e("#wa_fronted_switch_revision"),-1!==t[a].post_name.indexOf("-autosave-v1")&&(a-=1),n&&(a=t.length-1,o.switch_to_revision(t[a])),revision_input.val(t[a].post_date),a===t.length-1?(e("#wa-previous-revision").removeClass("disabled"),e("#wa-next-revision").addClass("disabled")):0===a?(e("#wa-next-revision").removeClass("disabled"),e("#wa-previous-revision").addClass("disabled")):(e("#wa-next-revision").removeClass("disabled"),e("#wa-previous-revision").removeClass("disabled")),e("#wa-previous-revision, #wa-next-revision").off(),e("#wa-previous-revision").on("click",function(n){n.preventDefault(),a-1>=0&&(e("#wa-next-revision").removeClass("disabled"),a-=1,revision_input.val(t[a].post_date),o.switch_to_revision(t[a]),0===a&&e(this).addClass("disabled"))}),e("#wa-next-revision").on("click",function(n){n.preventDefault(),a+1<=t.length-1&&(e("#wa-previous-revision").removeClass("disabled"),a+=1,revision_input.val(t[a].post_date),o.switch_to_revision(t[a]),a===t.length-1&&e(this).addClass("disabled"))}),e("#wa-fronted-revisions-modal").fadeIn("fast")}})},check_autosave:function(t){var n=this;e.post(global_vars.ajax_url,{action:"wa_fronted_get_autosave",post_id:t},function(e){e.success&&e.data!==!1&&confirm(n.i18n("There is an autosave of this post that is more recent than the version below. View the autosave?"))&&n.show_revision_modal(t,!0)})},show_post_lock_notice:function(t,n){var o=this;confirm(o.i18n("Another user is currently editing this post. Take over?"))&&e.post(global_vars.ajax_url,{action:"wa_fronted_set_post_lock",post_id:n},function(e){e.success&&e.data!==!1&&location.reload()})},i18n:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(global_vars.i18n.hasOwnProperty(t)&&(t=global_vars.i18n[t]),-1!==t.indexOf("%s")&&Array.isArray(e)&&0!==e.length)for(var n=0;n<e.length;n++)t=t.replace("%s",e[n]);return t}},e(document).ready(function(){"undefined"!=typeof global_vars.options&&Modernizr.contenteditable&&(window.wp=window.wp||{},"undefined"==typeof window.wp.hooks&&(window.wp.hooks=new EventManager),wa_fronted.initialize())})}(jQuery);
var wa_fronted=wa_fronted||{};!function(e){wa_fronted.validator=function(e,t,n){return wa_fronted.validators.hasOwnProperty(t)&&"function"==typeof wa_fronted.validators[t]?wa_fronted.validators[t](e,n):wa_fronted.apply_filters("validate",!0,e,t,n)},wa_fronted.validators={not_blank:function(e){return""===e.trim()||null===e?!1:!0},is_date:function(e){return!isNaN(Date.parse(e))},is_email:function(e){var t=new RegExp(/^(("[\w-+\s]+")|([\w-+]+(?:\.[\w-+]+)*)|("[\w-+\s]+")([\w-+]+(?:\.[\w-+]+)*))(@((?:[\w-+]+\.)*\w[\w-+]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][\d]\.|1[\d]{2}\.|[\d]{1,2}\.))((25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\.){2}(25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\]?$)/i);return t.test(e)},is_num:function(t){return e.isNumeric(parseFloat(t))},contains_num:function(t){return t=t.replace(/[^\d.-]/g,""),e.isNumeric(parseFloat(t))},is_alphanum:function(e){var t=new RegExp(/^([0-9]|[a-z])+([0-9a-z]+)$/i);return t.text(e)},is_url:function(e){var t=new RegExp(/^[a-z](?:[-a-z0-9\+\.])*:(?:\/\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD])*@)?(?:\[(?:(?:(?:[0-9a-f]{1,4}:){6}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|::(?:[0-9a-f]{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:[0-9a-f]{1,4}:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3})|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+[-a-z0-9\._~!\$&'\(\)\*\+,;=:]+)\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}|(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD])*)(?::[0-9]*)?(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD]))*)*|\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD]))*)*)?|(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD]))+)(?:\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD])))(?:\?(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\/\?\xA0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E\uDB80-\uDBBE\uDBC0-\uDBFE][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDC00-\uDFFD])*)?(?:\#(?:%[0-9a-f][0-9a-f]|[-a-z0-9\._~!\$&'\(\)\*\+,;=:@\/\?\xA0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB44-\uDB7E][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F][\uDC00-\uDFFD])*)?$/i);return t.text(e)},is_tel:function(e){var t=new RegExp(/\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/g);return t.text(e)},min_length:function(e,t){return e.length>=parseFloat(t)},max_length:function(e,t){return e.length<=parseFloat(t)},is_length:function(e,t){return e.length===parseFloat(t)},min:function(e,t){var n=this;return n.is_num(e)&&parseFloat(e)>=parseFloat(t)},max:function(e,t){var n=this;return n.is_num(e)&&parseFloat(e)<=parseFloat(t)},between:function(t,n){var a=this;return t=parseFloat(t),e.isArray(n)&&a.is_num(t)&&t>=n[0]&&t<=n[1]},equal_to:function(e,t){return parseFloat(e)===parseFloat(t)}},wa_fronted.validation_msg=function(e,t){t=t||!1;var n="";switch(e){case"not_blank":n=wa_fronted.i18n("Cannot be empty");break;case"is_date":n=wa_fronted.i18n("Must be a date");break;case"is_email":n=wa_fronted.i18n("Must be a valid email address");break;case"is_num":n=wa_fronted.i18n("Must be a number");break;case"contains_num":n=wa_fronted.i18n("Must contain a number");break;case"is_alphanum":n=wa_fronted.i18n("Can only be letters or numbers");break;case"is_url":n=wa_fronted.i18n("Must be an url");break;case"is_tel":n=wa_fronted.i18n("Must be a phone number");break;case"min_length":n=wa_fronted.i18n("Must be more than %s characters",t);break;case"max_length":n=wa_fronted.i18n("Must be less than %s characters",t);break;case"is_length":n=wa_fronted.i18n("Must be %s characters",t);break;case"min":n=wa_fronted.i18n("Must be greater than ",t);break;case"max":n=wa_fronted.i18n("Must be less than ",t);break;case"between":n=wa_fronted.i18n("Must be between %s and %s",t[0],t[1]);break;case"equal_to":n=wa_fronted.i18n("Must be ",t);break;default:n=wa_fronted.apply_filters("validation_msg",n,e,t)}return n}}(jQuery);
