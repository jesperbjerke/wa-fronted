var wa_fronted_acf;!function(t){wa_fronted.add_action("on_bind",function(){t("#acf-dialog #close-acf-dialog").click(function(t){t.preventDefault(),t.stopPropagation(),wa_fronted_acf.hide_acf_form()}),"undefined"!=typeof acf&&acf.add_action("submit",function(e){for(var a=e.serializeArray(),o={action:"wa_save_acf_form"},n=0;n<a.length;n++)o[a[n].name]=a[n].value;t.post(global_vars.ajax_url,o).done(function(t){wa_fronted_acf.refresh_acf_field(wa_fronted_acf.data.acf_temp.field_key,wa_fronted_acf.data.acf_temp.post_id,wa_fronted.data.current_editor_options,wa_fronted.data.current_editor)})})}),wa_fronted.add_action("on_setup_editor",function(e,a,o){wa_fronted_acf.get_acf_field_object(a.field_type,function(o){if(!o.hasOwnProperty("error")){switch(o.type){case"file":case"image":null!==o.value&&e.attr("data-db-value",o.value.ID)}var n=e.children(),i=t(n[0]),f=i.width(),r=i.position();e.prepend('<button title="Edit '+o.type+'" class="edit-acf-field" style="left: '+(r.left+(f/2-13))+'px;"><i class="fa fa-edit"></i></button>'),e.hover(function(){var t=i.position();e.find(".edit-acf-field").css({top:t.top+"px"}).addClass("show")},function(){e.find(".edit-acf-field").removeClass("show")}),e.find(".edit-acf-field").click(function(t){t.preventDefault(),t.stopPropagation(),wa_fronted_acf.show_acf_form(o.key,a.post_id,a,e)})}})}),wa_fronted_acf={data:{acf_temp:{field_key:!1,post_id:!1}},get_acf_field_object:function(e,a){t.post(global_vars.ajax_url,{action:"wa_get_acf_field_object",field_key:e},function(t){a(t)})},get_acf_field_contents:function(e,a,o){t.post(global_vars.ajax_url,{action:"wa_get_acf_field_contents",field_key:e,post_id:a},function(t){o(t)})},get_acf_form:function(e,a,o){t.post(global_vars.ajax_url,{action:"wa_get_acf_form",field_key:e,post_id:a,redirect:window.location.pathname},function(t){o(t)})},show_acf_form:function(e,a,o,n){var i=this;i.data.acf_temp.field_key=e,i.data.acf_temp.post_id=a,wa_fronted.data.current_editor_options=o,wa_fronted.data.current_editor=n,i.get_acf_form(e,a,function(e){t("#acf-dialog #acf-dialog-inner").html(e.output),t("#acf-dialog #acf-dialog-inner form").submit(function(t){t.preventDefault()}),t("#acf-dialog").fadeIn().addClass("active")})},hide_acf_form:function(){t("#acf-dialog").fadeOut().removeClass("active")},refresh_acf_field:function(t,e,a,o){var n=this;n.get_acf_field_contents(t,e,function(t){var e="";if(a.hasOwnProperty("output")){var i=a.output.split(".");e=t.value;for(var f=0;f<i.length;f++)e=e[i[f]]}else e=t.value;wa_fronted.specific_output_to(o,a,t.value.ID,e)||o.html(e),n.hide_acf_form()})}}}(jQuery);
