var wa_fronted_acf;!function(e){wa_fronted.add_action("on_bind",function(){e("#acf-dialog #close-acf-dialog").click(function(e){e.preventDefault(),e.stopPropagation(),wa_fronted_acf.hide_acf_form()}),wa_fronted.add_filter("revision_content",wa_fronted_acf.switch_revision_content),wa_fronted.add_filter("revision_db_value ",wa_fronted_acf.switch_revision_db_value),"undefined"!=typeof acf&&acf.add_action("submit",function(t){for(var n=t.serializeArray(),a={action:"wa_save_acf_form"},i=0;i<n.length;i++)a[n[i].name]=n[i].value;e.post(global_vars.ajax_url,a).done(function(e){wa_fronted_acf.refresh_acf_field(wa_fronted_acf.data.acf_temp.field_key,wa_fronted_acf.data.acf_temp.post_id,wa_fronted.data.current_editor_options,wa_fronted.data.current_editor)})})}),wa_fronted.add_action("on_setup_editor",function(t,n,a){wa_fronted_acf.get_acf_field_object(n.field_type,function(a){if(!a.hasOwnProperty("error")){switch(a.type){case"file":case"image":null!==a.value&&t.attr("data-db-value",a.value.ID)}var i=t.children(),o=0!==i.length?e(i[0]):t,r=o.width(),s=o.position();e("body").prepend('<button id="'+a.key+'" title="Edit '+a.type+'" class="edit-acf-field" style="left: '+(s.left+(r/2-13))+'px;"><i class="fa fa-edit"></i></button>');var u,l=e("#"+a.key),d=function(){u=setTimeout(function(){l.removeClass("show")},500)};t.hover(function(){clearTimeout(u);var e=o.position();l.css({top:e.top+"px"}).addClass("show")},d),l.hover(function(){clearTimeout(u)},d).click(function(e){e.preventDefault(),e.stopPropagation(),wa_fronted_acf.show_acf_form(a.key,n.post_id,n,t)})}})}),wa_fronted_acf={data:{acf_temp:{field_key:!1,post_id:!1}},get_acf_field_object:function(t,n){e.post(global_vars.ajax_url,{action:"wa_get_acf_field_object",field_key:t},function(e){n(e)})},get_acf_field_contents:function(t,n,a){e.post(global_vars.ajax_url,{action:"wa_get_acf_field_contents",field_key:t,post_id:n},function(e){a(e)})},get_acf_form:function(t,n,a){e.post(global_vars.ajax_url,{action:"wa_get_acf_form",field_key:t,post_id:n,redirect:window.location.pathname},function(e){a(e)})},show_acf_form:function(t,n,a,i){var o=this;o.data.acf_temp.field_key=t,o.data.acf_temp.post_id=n,wa_fronted.data.current_editor_options=a,wa_fronted.data.current_editor=i,o.get_acf_form(t,n,function(t){e("#acf-dialog #acf-dialog-inner").html(t.output),e("#acf-dialog #acf-dialog-inner form").submit(function(e){e.preventDefault()}),e("#acf-dialog").fadeIn().addClass("active")})},hide_acf_form:function(){e("#acf-dialog").fadeOut().removeClass("active")},refresh_acf_field:function(e,t,n,a){var i=this;i.get_acf_field_contents(e,t,function(e){var t="";if(n.hasOwnProperty("output")){var o=n.output.split(".");t=e.value;for(var r=0;r<o.length;r++)t=t[o[r]]}else t=e.value;wa_fronted.specific_output_to(a,n,e.value.ID,t)||a.html(t),i.hide_acf_form()})},switch_revision_content:function(e,t,n){if(0!==n.acf_fields.length&&"object"==typeof n.acf_fields&&n.acf_fields.hasOwnProperty(t.options.field_name)){if(t.options.hasOwnProperty("output")){var a=t.options.output.split(".");output_content=n.acf_fields[t.options.field_name].value;for(var i=0;i<a.length;i++)output_content=output_content[a[i]]}else output_content=n.acf_fields[t.options.field_name].value;return output_content}return e},switch_revision_db_value:function(e,t,n){return 0!==n.acf_fields.length&&"object"==typeof n.acf_fields&&n.acf_fields.hasOwnProperty(t.options.field_name)?n.acf_fields[t.options.field_name].value.ID:e}}}(jQuery);
