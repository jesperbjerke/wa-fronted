var wa_fronted_acf;!function(a){wa_fronted.add_action("on_bind",function(){a("#acf-dialog #close-acf-dialog").click(function(a){a.preventDefault(),a.stopPropagation(),wa_fronted_acf.hide_acf_form()}),"undefined"!=typeof acf&&acf.add_action("submit",function(t){for(var e=t.serializeArray(),f={action:"wa_save_acf_form"},o=0;o<e.length;o++)f[e[o].name]=e[o].value;a.post(global_vars.ajax_url,f).done(function(a){wa_fronted_acf.refresh_acf_field(wa_fronted_acf.data.acf_temp.field_key,wa_fronted_acf.data.acf_temp.post_id,wa_fronted.data.current_editor_options,wa_fronted.data.current_editor)})})}),wa_fronted.add_action("on_setup_editor",function(t,e,f){wa_fronted_acf.get_acf_field_object(e.field_type,function(f){if(!f.hasOwnProperty("error")){switch(f.type){case"file":case"image":null!==f.value&&t.attr("data-db-value",f.value.ID)}var o=t.children(),i=a(o[0]),n=i.width(),_=i.position();t.prepend('<button title="Edit '+f.type+'" class="edit-acf-field" style="left: '+(_.left+(n/2-13))+'px;"><i class="fa fa-edit"></i></button>'),t.hover(function(){var a=i.position();t.find(".edit-acf-field").css({top:a.top+"px"}).addClass("show")},function(){t.find(".edit-acf-field").removeClass("show")}),t.find(".edit-acf-field").click(function(a){a.preventDefault(),a.stopPropagation(),wa_fronted_acf.show_acf_form(f.key,e.post_id,e,t)})}})}),wa_fronted_acf={data:{acf_temp:{field_key:!1,post_id:!1}},get_acf_field_object:function(t,e){a.post(global_vars.ajax_url,{action:"wa_get_acf_field_object",field_key:t},function(a){e(a)})},get_acf_field_contents:function(t,e,f){a.post(global_vars.ajax_url,{action:"wa_get_acf_field_contents",field_key:t,post_id:e},function(a){f(a)})},get_acf_form:function(t,e,f){a.post(global_vars.ajax_url,{action:"wa_get_acf_form",field_key:t,post_id:e,redirect:window.location.pathname},function(a){f(a)})},show_acf_form:function(t,e,f,o){var i=this;i.data.acf_temp.field_key=t,i.data.acf_temp.post_id=e,wa_fronted.data.current_editor_options=f,wa_fronted.data.current_editor=o,i.get_acf_form(t,e,function(t){a("#acf-dialog #acf-dialog-inner").html(t.output),a("#acf-dialog #acf-dialog-inner form").submit(function(a){a.preventDefault()}),a("#acf-dialog").fadeIn().addClass("active")})},hide_acf_form:function(){a("#acf-dialog").fadeOut().removeClass("active")},refresh_acf_field:function(a,t,e,f){var o=this;o.get_acf_field_contents(a,t,function(a){var t="";if(e.hasOwnProperty("output")){var i=e.output.split(".");t=a.value;for(var n=0;n<i.length;n++)t=t[i[n]]}else t=a.value;wa_fronted.specific_output_to(f,e,a.value.ID,t)||f.html(t),o.hide_acf_form()})}}}(jQuery);
